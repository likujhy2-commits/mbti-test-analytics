<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜•ì€?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            font-size: 2.5em;
            color: #4a90e2;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 20px;
        }

        p {
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
            color: #555;
        }

        .start-button, .view-analytics-button {
            padding: 18px 40px;
            font-size: 1.2em;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
            margin-bottom: 15px; /* Added margin for spacing */
        }

        .start-button:hover, .view-analytics-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(74, 144, 226, 0.4);
        }

        .start-button:active, .view-analytics-button:active {
            transform: translateY(-1px);
        }

        .info {
            margin-top: 20px;
            font-size: 0.9em;
            color: #888;
        }

        /* í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .test-container {
            max-width: 600px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .question-number {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #fafafa;
            text-align: left;
        }

        .option:hover {
            border-color: #4a90e2;
            background-color: #f0f7ff;
            transform: translateY(-2px);
        }

        .option.selected {
            border-color: #4a90e2;
            background-color: #e3f2fd;
        }

        .next-button {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        .next-button.active {
            opacity: 1;
            pointer-events: auto;
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
        }

        /* ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .result-container {
            max-width: 700px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .result-type {
            font-size: 3em;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .result-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #555;
        }

        .traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .trait {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #4a90e2;
        }

        .trait-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 5px;
        }

        .trait-desc {
            font-size: 0.9em;
            color: #666;
        }

        .restart-button, .view-analytics-button-result {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #4a90e2;
            background-color: transparent;
            border: 2px solid #4a90e2;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .restart-button:hover, .view-analytics-button-result:hover {
            background-color: #4a90e2;
            color: #fff;
            transform: translateY(-2px);
        }

        /* ë°ì´í„° ë¶„ì„ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .analytics-container {
            max-width: 800px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .analytics-container h2 {
            font-size: 2em;
            color: #4a90e2;
            margin-bottom: 25px;
            font-weight: 700;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border-left: 5px solid #764ba2;
        }

        .analytics-card-title {
            font-size: 1.1em;
            color: #555;
            margin-bottom: 10px;
        }

        .analytics-card-value {
            font-size: 2.2em;
            font-weight: bold;
            color: #764ba2;
        }

        .chart-container {
            margin-bottom: 30px;
        }

        .chart-container canvas {
            max-width: 100%;
            height: auto;
        }
        .back-to-home-button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #667eea;
            background-color: transparent;
            border: 2px solid #667eea;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .back-to-home-button:hover {
            background-color: #667eea;
            color: #fff;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

<div class="container" id="startPage">
    <h1>ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜•ì€?</h1>
    <div class="subtitle">Myers-Briggs Type Indicator</div>
    <p>ì„¤ë¬¸ì„ í†µí•´ ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜•ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
    <button class="start-button" onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
    <button class="view-analytics-button" onclick="showAnalyticsPage()">ë°ì´í„° ë¶„ì„ ë³´ê¸°</button>
    <div class="info">â±ï¸ ì†Œìš”ì‹œê°„: ì•½ 5ë¶„</div>
</div>

<div class="test-container" id="testPage">
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="question-number" id="questionNumber">ì§ˆë¬¸ 1 / 15</div>
    <div class="question" id="questionText"></div>
    <div class="options" id="options"></div>
    <button class="next-button" id="nextButton" onclick="nextQuestion()">ë‹¤ìŒ ì§ˆë¬¸</button>
</div>

<div class="result-container" id="resultPage">
    <div class="result-type" id="resultType"></div>
    <div class="result-title" id="resultTitle"></div>
    <div class="result-description" id="resultDescription"></div>
    <div class="traits" id="traits"></div>
    <button class="restart-button" onclick="restartTest()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
    <button class="view-analytics-button-result" onclick="showAnalyticsPage()">ë°ì´í„° ë¶„ì„ ë³´ê¸°</button>
</div>

<div class="analytics-container" id="analyticsPage">
    <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¶„ì„</h2>
    <div class="analytics-grid">
        <div class="analytics-card">
            <div class="analytics-card-title">ì´ í…ŒìŠ¤íŠ¸ ìˆ˜</div>
            <div class="analytics-card-value" id="totalTests">0</div>
        </div>
        <div class="analytics-card">
            <div class="analytics-card-title">ê³ ìœ  ì‚¬ìš©ì ìˆ˜</div>
            <div class="analytics-card-value" id="uniqueUsers">0</div>
        </div>
        <div class="analytics-card">
            <div class="analytics-card-title">ê°€ì¥ ë§ì€ ìœ í˜•</div>
            <div class="analytics-card-value" id="mostFrequentType">-</div>
        </div>
        <div class="analytics-card">
            <div class="analytics-card-title">í‰ê·  ì™„ë£Œ ì‹œê°„(ë¶„)</div>
            <div class="analytics-card-value" id="avgCompletionTime">0</div>
        </div>
    </div>

    <div class="chart-container">
        <h3>MBTI ìœ í˜•ë³„ ë¶„í¬</h3>
        <canvas id="mbtiTypeChart"></canvas>
    </div>

    <div class="chart-container">
        <h3>4ì°¨ì›ë³„ ë¶„í¬</h3>
        <canvas id="dimensionChart"></canvas>
    </div>
    
    <button class="back-to-home-button" onclick="goToHomePage()">ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // MBTI ì§ˆë¬¸ ë°ì´í„° (ê¸°ì¡´ mbti-test.html ë‚´ìš©ê³¼ ë™ì¼)
    const questions = [
        // ì±•í„° 1: ì¼ê²½í—˜ ì„ í˜¸ë„ ì¡°ì‚¬
        {
            question: "ë‚˜ëŠ” ì–´ë–¤ í˜•íƒœì˜ ì¼ê²½í—˜ì´ ê°€ì¥ í¥ë¯¸ë¡œìš´ê°€?",
            options: [
                { text: "ì‹¤ë¬´ ì¤‘ì‹¬ì˜ ì¼ê²¨í—˜", type: "C1Q1A" },
                { text: "ë‹¤ì–‘í•œ ì§ë¬´ë¥¼ ì²´í—˜í•˜ëŠ” ë‹¨ê¸° í”„ë¡œê·¸ë¨", type: "C1Q1B" },
                { text: "ì°½ì—…Â·í”„ë¡œì íŠ¸ ì°¸ì—¬í˜• í™œë™", type: "C1Q1C" },
                { text: "íƒ€ì§€ì—­ì—ì„œ ê²½í—˜í•  ìˆ˜ ìˆëŠ” í™œë™", type: "C1Q1D" }
            ]
        },
        {
            question: "ì¼ê²½í—˜ì—ì„œ ê°€ì¥ ê¸°ëŒ€í•˜ëŠ” ê²ƒì€?",
            options: [
                { text: "ì „ë¬¸ ìŠ¤í‚¬Â·ì‹¤ë¬´ ì—­ëŸ‰ ìŠµë“", type: "C1Q2A" },
                { text: "í˜„ì§ìì™€ì˜ ë„¤íŠ¸ì›Œí‚¹/ë©˜í† ë§", type: "C1Q2B" },
                { text: "í¬íŠ¸í´ë¦¬ì˜¤ í™•ë³´", type: "C1Q2C" },
                { text: "ì§ì¥ìƒí™œ ê²½í—˜", type: "C1Q2D" }
            ]
        },
        {
            question: "ì¼ê²½í—˜ ì°¸ì—¬ ì‹œ ê°€ì¥ ì‹ ê²½ ì“°ì´ëŠ” ì ì€?",
            options: [
                { text: "ê¸‰ì—¬Â·ì§€ì›ê¸ˆì˜ ë¶€ì¡±í•¨", type: "C1Q3A" },
                { text: "ì°¸ì—¬ ê¸°ê°„ê³¼ ì‹ ì²­ ì¼ì •", type: "C1Q3B" },
                { text: "ì›í•˜ëŠ” ì§ë¬´ì™€ì˜ ì—°ê³„ì„±", type: "C1Q3C" },
                { text: "ì •ë³´ ì ‘ê·¼ì„±ê³¼ ëª¨ì§‘ ë°©ë²•ì˜ ë¶€ì¬", type: "C1Q3D" }
            ]
        },
        {
            question: "ì„ í˜¸í•˜ëŠ” ì¼ê²½í—˜ ê¸°ê°„ì€?",
            options: [
                { text: "1ê°œì›” ì´í•˜ ë‹¨ê¸° í”„ë¡œê·¸ë¨", type: "C1Q4A" },
                { text: "3ê°œì›” ë‹¨ê¸° ì§‘ì¤‘í˜•", type: "C1Q4B" },
                { text: "5ê°œì›” ì¤‘Â·ì¥ê¸°í˜•", type: "C1Q4C" },
                { text: "6ê°œì›” ì´ìƒ ì¥ê¸°í˜•", type: "C1Q4D" }
            ]
        },
        {
            question: "ì¼ê²½í—˜ í›„ ê°€ì¥ ê¸°ëŒ€í•˜ëŠ” ì„±ê³¼ëŠ”?",
            options: [
                { text: "ì·¨ì—… ì—°ê³„/ì •ê·œì§ ê¸°íšŒ", type: "C1Q5A" },
                { text: "ê²½ë ¥ í˜•ì„± ë° í¬íŠ¸í´ë¦¬ì˜¤ ê°•í™”", type: "C1Q5B" },
                { text: "ìê¸° ì„±ì¥ê³¼ ì§„ë¡œ íƒìƒ‰", type: "C1Q5C" },
                { text: "ì¸ë§¥ í˜•ì„± ë° ë„¤íŠ¸ì›Œí‚¹", type: "C1Q5D" }
            ]
        },
        // ì±•í„° 2: ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜• (ì§ë¬´ìœ í˜• í…ŒìŠ¤íŠ¸)
        {
            question: "ì—…ë¬´ë¥¼ ìˆ˜í–‰í•  ë•Œ ë‚˜ëŠ” ì£¼ë¡œ?",
            options: [
                { text: "ê³„íšëŒ€ë¡œ ê¼¼ê¼¼í•˜ê²Œ í•´ì•¼í•œë‹¤.", type: "C2Q1A" },
                { text: "ìƒˆë¡œìš´ ë°©ë²•ì„ ì‹œë„í•˜ë©° ìœ ì—°í•˜ê²Œ ì¼í•œë‹¤.", type: "C2Q1B" },
                { text: "ì‚¬ëŒë“¤ê³¼ í˜‘ì—…í•˜ë©° ì•„ì´ë””ì–´ë¥¼ ë‚˜ëˆ„ëŠ” ê±¸ ì„ í˜¸í•œë‹¤,", type: "C2Q1C" },
                { text: "í˜¼ì ì§‘ì¤‘í•´ì„œ ëª°ì…í•˜ë©° í•´ê²°í•˜ëŠ”ê±¸ ì„ í˜¸í•œë‹¤.", type: "C2Q1D" }
            ]
        },
        {
            question: "ë‚˜ëŠ” ë¬¸ì œë¥¼ ë§ˆì£¼í•˜ë©´?",
            options: [
                { text: "ë§¤ë‰´ì–¼/ì •í˜•í™”ëœ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•œë‹¤,", type: "C2Q2A" },
                { text: "ìƒˆë¡œìš´ í•´ê²°ì±…ì„ ì°¾ì•„ë³¸ë‹¤", type: "C2Q2B" },
                { text: "ì§ì¥ë™ë£Œ, ìƒì‚¬ì™€ ìƒì˜ í›„ ê²°ì •í•œë‹¤.", type: "C2Q2C" },
                { text: "ë¨¼ì € ì‹œë„í•´ë³´ê³  ê²°ê³¼ë¥¼ ë³´ë©° ì¡°ì •í•œë‹¤.", type: "C2Q2D" }
            ]
        },
        {
            question: "ë‚´ê°€ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì—­í• ì€?",
            options: [
                { text: "ê³„íší•˜ê³  ì •ë¦¬í•˜ëŠ” ì—­í• ", type: "C2Q3A" },
                { text: "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ì—­í• ", type: "C2Q3B" },
                { text: "ì‚¬ëŒë“¤ê³¼ ëŒ€í™”ê°€ ë„ˆë¬´ ì¢‹ì•„ìš”! ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì—­í• ", type: "C2Q3C" },
                { text: "ëª¨ë“ ì¼ ë‚´ê°€í•œë‹¤! ë¶€ì§€ëŸ°í•œ ì¼ê°œë¯¸ ì—­í• ", type: "C2Q3D" }
            ]
        },
        {
            question: "ë‚˜ëŠ” ì—…ë¬´ ì„±ê³¼ë¥¼ í‰ê°€ë°›ì„ ë•Œ?",
            options: [
                { text: "ì •í•´ì§„ ê¸°ì¤€Â·ì„±ê³¼ ëª©í‘œ ë‹¬ì„± ì—¬ë¶€", type: "C2Q4A" },
                { text: "ì°½ì˜ì  ì‹œë„ì™€ ìƒˆë¡œìš´ ê²°ê³¼", type: "C2Q4B" },
                { text: "íŒ€ê³¼ í•¨ê»˜ í˜‘ë ¥í•œ ê³¼ì •ê³¼ ê²°ê³¼", type: "C2Q4C" },
                { text: "í˜¼ì ì„±ì·¨í•œ ì‹¤ì§ˆì  ê²°ê³¼", type: "C2Q4D" }
            ]
        },
        {
            question: "ë‚˜ëŠ” ì¼í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê°€ì¹˜?",
            options: [
                { text: "ì•ˆì •ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±", type: "C2Q5A" },
                { text: "ë„ì „ê³¼ ì°½ì˜ì„±", type: "C2Q5B" },
                { text: "ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„Â·í˜‘ì—…", type: "C2Q5C" },
                { text: "ê°œì¸ ì„±ì·¨ê°Â·ì „ë¬¸ì„±", type: "C2Q5D" }
            ]
        },
        // ì±•í„° 3: ë‚´ê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” SNSì™€ ì„ í˜¸ ê²Œì‹œë¬¼ ìœ í˜•
        {
            question: "ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” SNSëŠ”?",
            options: [
                { text: "ì¸ìŠ¤íƒ€ê·¸ë¨", type: "C3Q1A" },
                { text: "ìœ íŠœë¸Œ", type: "C3Q1B" },
                { text: "í‹±í†¡", type: "C3Q1C" },
                { text: "í˜ì´ìŠ¤ë¶", type: "C3Q1D" },
                { text: "ê¸°íƒ€(ë„¤ì´ë²„ ì¹´í˜, ë””ìŠ¤ì½”ë“œ ë“±)", type: "C3Q1E" }
            ]
        },
        {
            question: "í•˜ë£¨ í‰ê·  SNS ì‚¬ìš© ì‹œê°„ì€?",
            options: [
                { text: "1ì‹œê°„ ë¯¸ë§Œ", type: "C3Q2A" },
                { text: "1~2ì‹œê°„", type: "C3Q2B" },
                { text: "2~3ì‹œê°„", type: "C3Q2C" },
                { text: "3ì‹œê°„ ì´ìƒ", type: "C3Q2D" }
            ]
        },
        {
            question: "SNSì—ì„œ ì£¼ë¡œ ë³´ëŠ” ì½˜í…ì¸  ìœ í˜•ì€?",
            options: [
                { text: "ì§§ì€ ì˜ìƒ/ë¦´ìŠ¤", type: "C3Q3A" },
                { text: "ì¹´ë“œë‰´ìŠ¤Â·ì •ë³´í˜• í¬ìŠ¤íŠ¸", type: "C3Q3B" },
                { text: "ì¹œêµ¬Â·ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€", type: "C3Q3C" },
                { text: "ê³µì‹ ê¸°ê´€Â·ë¸Œëœë“œ ê³µì§€/ì†Œì‹", type: "C3Q3D" }
            ]
        },
        {
            question: "ì¼ê²½í—˜ ê´€ë ¨ ì •ë³´ë¥¼ ì–»ì„ ë•Œ ì„ í˜¸í•˜ëŠ” ë°©ì‹ì€?",
            options: [
                { text: "ì˜ìƒ/ì¹´ë“œë‰´ìŠ¤ ì½˜í…ì¸ ", type: "C3Q4A" },
                { text: "SNS í¬ìŠ¤íŠ¸ë‚˜ ì»¤ë®¤ë‹ˆí‹° ê³µìœ ", type: "C3Q4B" },
                { text: "ì›¹ì‚¬ì´íŠ¸Â·í¬í„¸ ê²€ìƒ‰", type: "C3Q4C" },
                { text: "ê³µê³µê¸°ê´€Â·ì²­ë…„ì„¼í„° ê³µì‹ ì±„ë„", type: "C3Q4D" }
            ]
        },
        {
            question: "SNSì—ì„œ ê°€ì¥ ì°¸ì—¬í•˜ê³  ì‹¶ì€ í™œë™ì€?",
            options: [
                { text: "ëŒ“ê¸€Â·ì¢‹ì•„ìš” ë“± ê°„ë‹¨ ì°¸ì—¬", type: "C3Q5A" },
                { text: "ì´ë²¤íŠ¸Â·í€´ì¦ˆ ì°¸ì—¬", type: "C3Q5B" },
                { text: "ì‹¤ì‹œê°„ ë¼ì´ë¸Œ/ì§ˆë¬¸ ì°¸ì—¬", type: "C3Q5C" },
                { text: "ì§ì ‘ ì½˜í…ì¸  ì œì‘Â·ê³µìœ ", type: "C3Q5D" }
            ]
        }
    ];

    const mbtiResults = {
        "ê°ìêµ°": {
            title: "ê°ìêµ°",
            description: "ì°¨ë¶„í•˜ê²Œ ë‚´ ê¸¸ì„ ê°€ëŠ” ì•ˆì •í˜•. ëŠë¦¬ì§€ë§Œ ê¾¸ì¤€í•˜ê²Œ, ë¬µë¬µíˆ ì¼í•˜ëŠ” ì‹ ë¢°í˜• ì¹œêµ¬.",
            traits: [{ title: "ì•ˆì •í˜•", desc: "ì°¨ë¶„í•˜ê³  ì‹ ë¢°ê° ìˆìŒ" }]
        },
        "ë°”ë‚˜ë‹ˆ": {
            title: "ë°”ë‚˜ë‹ˆ",
            description: "ê³„íšì ì´ê³  íŠ¼íŠ¼í•œ ê¸°ë°˜, íŒ€ê³¼ í•¨ê»˜ ì„±ì¥ì„ ì¦ê¸°ëŠ” ì•ˆì •í˜• ë¦¬ë”.",
            traits: [{ title: "ì•ˆì •í˜•", desc: "ì°¨ë¶„í•˜ê³  ì‹ ë¢°ê° ìˆìŒ" }]
        },
        "ì• í”Œë§": {
            title: "ì• í”Œë§",
            description: "ê¼¼ê¼¼í•˜ê³  ê· í˜• ì¡íŒ ê°ê°, ìˆ«ìì™€ ë°ì´í„°ë¥¼ ì‚¬ë‘í•˜ëŠ” ì•ˆì •í˜• ì²œì¬.",
            traits: [{ title: "ì•ˆì •í˜•", desc: "ì°¨ë¶„í•˜ê³  ì‹ ë¢°ê° ìˆìŒ" }]
        },
        "ë°°ë§": {
            title: "ë°°ë§",
            description: "ê¼¼ê¼¼í•˜ê²Œ ì²´í¬í•˜ë©° ì‹¤ìˆ˜ë¥¼ ìµœì†Œí™”, ì•ˆì •ê° ìˆëŠ” ì‹ ë¢°í˜• ì¼ê¾¼.",
            traits: [{ title: "ì•ˆì •í˜•", desc: "ì°¨ë¶„í•˜ê³  ì‹ ë¢°ê° ìˆìŒ" }]
        },
        "ë”¸ê¸°íŒ¡": {
            title: "ë”¸ê¸°íŒ¡",
            description: "ì‚¬ëŒë“¤ê³¼ ì¹œê·¼í•˜ê²Œ ì†Œí†µí•˜ê³  ë¶„ìœ„ê¸° ë©”ì´ì»¤, íŒ€ì›Œí¬ë¥¼ ì¦ê¸°ëŠ” ì—°ê²°í˜•.",
            traits: [{ title: "ì—°ê²°í˜•", desc: "ì‚¬ëŒë“¤ê³¼ ì†Œí†µ, íŒ€ì›Œí¬ ì¦ê¹€" }]
        },
        "ì²´ë¦¬ë§": {
            title: "ì²´ë¦¬ë§",
            description: "ìƒí¼í•˜ê²Œ ì†Œí†µí•˜ë©° ê´€ê³„ë¥¼ ë§¤ë„ëŸ½ê²Œ ì—°ê²°í•˜ëŠ” ì‚¬ëŒ ì¤‘ì‹¬í˜• ìºë¦­í„°.",
            traits: [{ title: "ì—°ê²°í˜•", desc: "ì‚¬ëŒë“¤ê³¼ ì†Œí†µ, íŒ€ì›Œí¬ ì¦ê¹€" }]
        },
        "ë§ê³ ëª½": {
            title: "ë§ê³ ëª½",
            description: "ë¶€ë“œëŸ½ê³  ì¹œê·¼í•˜ê²Œ ìƒëŒ€ë°© ë§ˆìŒì„ ì½ëŠ” ì—°ê²°í˜•, ìƒë‹´ ì „ë¬¸ê°€.",
            traits: [{ title: "ì—°ê²°í˜•", desc: "ì‚¬ëŒë“¤ê³¼ ì†Œí†µ, íŒ€ì›Œí¬ ì¦ê¹€" }]
        },
        "ì˜¤ë Œì§€íŒŸ": {
            title: "ì˜¤ë Œì§€íŒŸ",
            description: "ë‹¤ì±„ë¡œìš´ ì‚¬ëŒë“¤ê³¼ í™œë°œíˆ ì†Œí†µí•˜ë©° ì§€ì‹ì„ ì „ë‹¬í•˜ëŠ” ì—°ê²°í˜•.",
            traits: [{ title: "ì—°ê²°í˜•", desc: "ì‚¬ëŒë“¤ê³¼ ì†Œí†µ, íŒ€ì›Œí¬ ì¦ê¹€" }]
        },
        "ìˆ˜ë°•íŒ¡": {
            title: "ìˆ˜ë°•íŒ¡",
            description: "ì‹œì›í•˜ê³  í° ë§¤ë ¥, ë‹¤ìˆ˜ì™€ ì¦ê²ê²Œ ì†Œí†µí•˜ë©° ê´€ê³„ í˜•ì„±ì„ ì¢‹ì•„í•˜ëŠ” ì—°ê²°í˜•.",
            traits: [{ title: "ì—°ê²°í˜•", desc: "ì‚¬ëŒë“¤ê³¼ ì†Œí†µ, íŒ€ì›Œí¬ ì¦ê¹€" }]
        },
        "íŒŒì¸íŒ¡": {
            title: "íŒŒì¸íŒ¡",
            description: "ë…ì°½ì ì´ê³  ì°½ì˜ë ¥ í­ë°œ, ë„ì „ì„ ì¦ê¸°ëŠ” íƒí—˜í˜• ì—°êµ¬ì.",
            traits: [{ title: "íƒí—˜í˜•", desc: "ì°½ì˜ì ì´ê³  ë„ì „ ì •ì‹  ê°•í•¨" }]
        },
        "í‚¤ìœ„í‚¹": {
            title: "í‚¤ìœ„í‚¹",
            description: "ê²‰ë³´ê¸° í‰ë²”í•˜ì§€ë§Œ ì†ì€ í˜ì‹ ì , ìƒˆë¡œìš´ ì‹œë„ë¥¼ ì¦ê¸°ëŠ” íƒí—˜í˜•.",
            traits: [{ title: "íƒí—˜í˜•", desc: "ì°½ì˜ì ì´ê³  ë„ì „ ì •ì‹  ê°•í•¨" }]
        },
        "ë¸”ë£¨íŒ¡": {
            title: "ë¸”ë£¨íŒ¡",
            description: "ì‘ì§€ë§Œ ê°•ë ¥í•œ ì•„ì´ë””ì–´, ì°½ì˜ì  ê°ê°ì´ ë›°ì–´ë‚œ íƒí—˜í˜•.",
            traits: [{ title: "íƒí—˜í˜•", desc: "ì°½ì˜ì ì´ê³  ë„ì „ ì •ì‹  ê°•í•¨" }]
        },
        "ë ˆëª¨ë§": {
            title: "ë ˆëª¨ë§",
            description: "í†¡ ì˜ëŠ” ë„ì „ ì •ì‹ , ê°•ë ¬í•˜ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” íƒí—˜í˜• ì°½ì—…ê°€.",
            traits: [{ title: "íƒí—˜í˜•", desc: "ì°½ì˜ì ì´ê³  ë„ì „ ì •ì‹  ê°•í•¨" }]
        },
        "í¬ë„êµ°": {
            title: "í¬ë„êµ°",
            description: "ë¬µë¬µíˆ ì¼í•˜ë©° ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ëª°ì…í˜•, íŒ€ ì†ì—ì„œë„ ì§‘ì¤‘ë ¥ ìµœê³ .",
            traits: [{ title: "ì§‘ì¤‘í˜•", desc: "ëª°ì…ê³¼ ì§‘ì¤‘, ì‹¤ì§ˆì  ì„±ê³¼ ì¤‘ì‹¬" }]
        },
        "ë ˆë“œì• í”Œ": {
            title: "ë ˆë“œì• í”Œ",
            description: "ì²´ê³„ì ì´ê³  íš¨ìœ¨ì , ì‹¤ìš©ì ì´ê³  ì•ˆì •ì ì¸ ì§‘ì¤‘í˜•.",
            traits: [{ title: "ì§‘ì¤‘í˜•", desc: "ëª°ì…ê³¼ ì§‘ì¤‘, ì‹¤ì§ˆì  ì„±ê³¼ ì¤‘ì‹¬" }]
        },
        "ë‹¨ë°°ë§": {
            title: "ë‹¨ë°°ë§",
            description: "ë“ ë“ í•˜ê³  ë¬µë¬µíˆ ì§€í‚¤ëŠ” ì•ˆì •ì  ì§‘ì¤‘í˜•, ì±…ì„ê° ëíŒì™•.",
            traits: [{ title: "ì§‘ì¤‘í˜•", desc: "ëª°ì…ê³¼ ì§‘ì¤‘, ì‹¤ì§ˆì  ì„±ê³¼ ì¤‘ì‹¬" }]
        }
    };

    let currentQuestion = 0;
    // ëª¨ë“  ìºë¦­í„°ì˜ ì ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”
    let answers = {
        "ê°ìêµ°": 0, "ë°”ë‚˜ë‹ˆ": 0, "ì• í”Œë§": 0, "ë°°ë§": 0,
        "íŒŒì¸íŒ¡": 0, "í‚¤ìœ„í‚¹": 0, "ë¸”ë£¨íŒ¡": 0, "ë ˆëª¨ë§": 0,
        "ë”¸ê¸°íŒ¡": 0, "ì²´ë¦¬ë§": 0, "ë§ê³ ëª½": 0, "ì˜¤ë Œì§€íŒŸ": 0, "ìˆ˜ë°•íŒ¡": 0,
        "í¬ë„êµ°": 0, "ë ˆë“œì• í”Œ": 0, "ë‹¨ë°°ë§": 0
    };
    let selectedOption = null;
    let testStartTime;

    // ìºë¦­í„° ìœ í˜• ë° ìš°ì„ ìˆœìœ„ ì •ì˜ (ë™ì  ì²˜ë¦¬ìš©)
    const characterTypes = {
        "ì•ˆì •í˜•": ["ê°ìêµ°", "ë°”ë‚˜ë‹ˆ", "ì• í”Œë§", "ë°°ë§"],
        "íƒí—˜í˜•": ["íŒŒì¸íŒ¡", "í‚¤ìœ„í‚¹", "ë¸”ë£¨íŒ¡", "ë ˆëª¨ë§"],
        "ì—°ê²°í˜•": ["ë”¸ê¸°íŒ¡", "ì²´ë¦¬ë§", "ë§ê³ ëª½", "ì˜¤ë Œì§€íŒŸ", "ìˆ˜ë°•íŒ¡"],
        "ì§‘ì¤‘í˜•": ["í¬ë„êµ°", "ë ˆë“œì• í”Œ", "ë‹¨ë°°ë§"]
    };

    const typePriority = ["íƒí—˜í˜•", "ì—°ê²°í˜•", "ì§‘ì¤‘í˜•", "ì•ˆì •í˜•"]; // ìš°ì„ ìˆœìœ„: íƒí—˜í˜• > ì—°ê²°í˜• > ì§‘ì¤‘í˜• > ì•ˆì •í˜•

    // ì„ íƒì§€ ë§¤í•‘ (ì§ˆë¬¸ 2ì˜ C, D ì„ íƒì§€ ìˆ˜ì • í•„ìš”)
    const optionToCharactersMap = {
        // ì±•í„° 2: ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜• (ì§ë¬´ìœ í˜• í…ŒìŠ¤íŠ¸)
        "C2Q1A": ["ê°ìêµ°", "ë°”ë‚˜ë‹ˆ", "ì• í”Œë§", "ë°°ë§"], // ê³„íšëŒ€ë¡œ ê¼¼ê¼¼í•˜ê²Œ
        "C2Q1B": ["íŒŒì¸íŒ¡", "í‚¤ìœ„í‚¹", "ë¸”ë£¨íŒ¡", "ë ˆëª¨ë§"], // ìƒˆë¡œìš´ ë°©ë²•ì„ ì‹œë„
        "C2Q1C": ["ë”¸ê¸°íŒ¡", "ì²´ë¦¬ë§", "ë§ê³ ëª½", "ì˜¤ë Œì§€íŒŸ", "ìˆ˜ë°•íŒ¡"], // ì‚¬ëŒë“¤ê³¼ í˜‘ì—…í•˜ë©° ì•„ì´ë””ì–´ë¥¼ ë‚˜ëˆ„ëŠ” ê±¸ ì„ í˜¸í•œë‹¤,
        "C2Q1D": ["í¬ë„êµ°", "ë ˆë“œì• í”Œ", "ë‹¨ë°°ë§"], // í˜¼ì ì§‘ì¤‘í•´ì„œ ëª°ì…í•˜ë©° í•´ê²°í•˜ëŠ”ê±¸ ì„ í˜¸í•œë‹¤.

        "C2Q2A": ["ê°ìêµ°", "ë°”ë‚˜ë‹ˆ", "ì• í”Œë§", "ë°°ë§"], // ë§¤ë‰´ì–¼/ì •í˜•í™”
        "C2Q2B": ["íŒŒì¸íŒ¡", "í‚¤ìœ„í‚¹", "ë¸”ë£¨íŒ¡", "ë ˆëª¨ë§"], // ìƒˆë¡œìš´ í•´ê²°ì±…
        "C2Q2C": ["ë”¸ê¸°íŒ¡", "ì²´ë¦¬ë§", "ë§ê³ ëª½", "ì˜¤ë Œì§€íŒŸ", "ìˆ˜ë°•íŒ¡"], // ì§ì¥ë™ë£Œ, ìƒì‚¬ì™€ ìƒì˜ í›„ ê²°ì •í•œë‹¤.
        "C2Q2D": ["í¬ë„êµ°", "ë ˆë“œì• í”Œ", "ë‹¨ë°°ë§"], // ë¨¼ì € ì‹œë„ í›„ ì¡°ì •í•œë‹¤.

        "C2Q3A": ["ê°ìêµ°", "ë°”ë‚˜ë‹ˆ", "ì• í”Œë§", "ë°°ë§"], // ê³„íší•˜ê³  ì •ë¦¬í•˜ëŠ” ì—­í• 
        "C2Q3B": ["íŒŒì¸íŒ¡", "í‚¤ìœ„í‚¹", "ë¸”ë£¨íŒ¡", "ë ˆëª¨ë§"], // ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ì—­í• 
        "C2Q3C": ["ë”¸ê¸°íŒ¡", "ì²´ë¦¬ë§", "ë§ê³ ëª½", "ì˜¤ë Œì§€íŒŸ", "ìˆ˜ë°•íŒ¡"], // ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì—­í• 
        "C2Q3D": ["í¬ë„êµ°", "ë ˆë“œì• í”Œ", "ë‹¨ë°°ë§"], // ëª¨ë“  ì¼ ì§ì ‘ ìˆ˜í–‰! ë¶€ì§€ëŸ°í•œ ì¼ê°œë¯¸ ì—­í• 

        "C2Q4A": ["ê°ìêµ°", "ë°”ë‚˜ë‹ˆ", "ì• í”Œë§", "ë°°ë§"], // ì •í•´ì§„ ê¸°ì¤€Â·ì„±ê³¼ ëª©í‘œ ë‹¬ì„± ì—¬ë¶€
        "C2Q4B": ["íŒŒì¸íŒ¡", "í‚¤ìœ„í‚¹", "ë¸”ë£¨íŒ¡", "ë ˆëª¨ë§"], // ì°½ì˜ì  ì‹œë„ì™€ ìƒˆë¡œìš´ ê²°ê³¼
        "C2Q4C": ["ë”¸ê¸°íŒ¡", "ì²´ë¦¬ë§", "ë§ê³ ëª½", "ì˜¤ë Œì§€íŒŸ", "ìˆ˜ë°•íŒ¡"], // íŒ€ê³¼ í•¨ê»˜ í˜‘ë ¥í•œ ê³¼ì •ê³¼ ê²°ê³¼
        "C2Q4D": ["í¬ë„êµ°", "ë ˆë“œì• í”Œ", "ë‹¨ë°°ë§"], // í˜¼ì ì„±ì·¨í•œ ì‹¤ì§ˆì  ê²°ê³¼

        "C2Q5A": ["ê°ìêµ°", "ë°”ë‚˜ë‹ˆ", "ì• í”Œë§", "ë°°ë§"], // ì•ˆì •ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±
        "C2Q5B": ["íŒŒì¸íŒ¡", "í‚¤ìœ„í‚¹", "ë¸”ë£¨íŒ¡", "ë ˆëª¨ë§"], // ë„ì „ê³¼ ì°½ì˜ì„±
        "C2Q5C": ["ë”¸ê¸°íŒ¡", "ì²´ë¦¬ë§", "ë§ê³ ëª½", "ì˜¤ë Œì§€íŒŸ", "ìˆ˜ë°•íŒ¡"], // ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„Â·í˜‘ì—…
        "C2Q5D": ["í¬ë„êµ°", "ë ˆë“œì• í”Œ", "ë‹¨ë°°ë§"]  // ê°œì¸ ì„±ì·¨ê°Â·ì „ë¬¸ì„±
    };

    // ë°ì´í„° ì €ì¥ ë° ë¡œë“œ
    function getAnalyticsData() {
        return JSON.parse(localStorage.getItem('mbtiAnalytics')) || {
            totalTests: 0,
            uniqueUsers: [],
            mbtiTypeCounts: {
                "ê°ìêµ°": 0, "ë°”ë‚˜ë‹ˆ": 0, "ì• í”Œë§": 0, "ë°°ë§": 0,
                "íŒŒì¸íŒ¡": 0, "í‚¤ìœ„í‚¹": 0, "ë¸”ë£¨íŒ¡": 0, "ë ˆëª¨ë§": 0,
                "ë”¸ê¸°íŒ¡": 0, "ì²´ë¦¬ë§": 0, "ë§ê³ ëª½": 0, "ì˜¤ë Œì§€íŒŸ": 0, "ìˆ˜ë°•íŒ¡": 0,
                "í¬ë„êµ°": 0, "ë ˆë“œì• í”Œ": 0, "ë‹¨ë°°ë§": 0
            },
            dimensionCounts: {
                "ì•ˆì •í˜•": 0, "íƒí—˜í˜•": 0, "ì—°ê²°í˜•": 0, "ì§‘ì¤‘í˜•": 0
            },
            completionTimes: []
        };
    }

    function saveAnalyticsData(data) {
        localStorage.setItem('mbtiAnalytics', JSON.stringify(data));
    }

    function startTest() {
        document.getElementById('startPage').style.display = 'none';
        document.getElementById('testPage').style.display = 'block';
        currentQuestion = 0;
        // ëª¨ë“  ìºë¦­í„°ì˜ ì ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”
        answers = {
            "ê°ìêµ°": 0, "ë°”ë‚˜ë‹ˆ": 0, "ì• í”Œë§": 0, "ë°°ë§": 0,
            "íŒŒì¸íŒ¡": 0, "í‚¤ìœ„í‚¹": 0, "ë¸”ë£¨íŒ¡": 0, "ë ˆëª¨ë§": 0,
            "ë”¸ê¸°íŒ¡": 0, "ì²´ë¦¬ë§": 0, "ë§ê³ ëª½": 0, "ì˜¤ë Œì§€íŒŸ": 0, "ìˆ˜ë°•íŒ¡": 0,
            "í¬ë„êµ°": 0, "ë ˆë“œì• í”Œ": 0, "ë‹¨ë°°ë§": 0
        };
        selectedOption = null;
        testStartTime = new Date(); // í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹œê°„ ê¸°ë¡
        showQuestion();
    }

    function showQuestion() {
        const question = questions[currentQuestion];
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        
        document.getElementById('progressFill').style.width = progress + '%';
        document.getElementById('questionNumber').textContent = `ì§ˆë¬¸ ${currentQuestion + 1} / ${questions.length}`;
        document.getElementById('questionText').textContent = question.question;
        
        const optionsContainer = document.getElementById('options');
        optionsContainer.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'option';
            optionElement.textContent = option.text;
            optionElement.onclick = () => selectOption(index, optionElement);
            optionsContainer.appendChild(optionElement);
        });
        
        document.getElementById('nextButton').classList.remove('active');
        selectedOption = null;
    }

    function selectOption(index, element) {
        document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
        selectedOption = index;
        document.getElementById('nextButton').classList.add('active');
    }

    function nextQuestion() {
        if (selectedOption === null) return;
        
        const question = questions[currentQuestion];
        const selectedAnswerType = question.options[selectedOption].type;

        // ìºë¦­í„° ì ìˆ˜ ì¦ê°€
        if (optionToCharactersMap[selectedAnswerType]) {
            optionToCharactersMap[selectedAnswerType].forEach(character => {
                answers[character]++;
            });
        }

        currentQuestion++;
        
        if (currentQuestion < questions.length) {
            showQuestion();
        } else {
            const testEndTime = new Date();
            const completionTime = (testEndTime - testStartTime) / 1000 / 60; // ë¶„ ë‹¨ìœ„

            // ê²°ê³¼ ê³„ì‚° í›„ ë¶„ì„ ë°ì´í„° ì—…ë°ì´íŠ¸
            const resultCharacter = calculateResultCharacter();
            updateAnalyticsData(resultCharacter, completionTime);
            showResult(resultCharacter);
        }
    }

    function calculateResultCharacter() {
        let maxScore = -1;
        let resultCharacters = [];

        // ê°€ì¥ ë†’ì€ ì ìˆ˜ë¥¼ ê°€ì§„ ìºë¦­í„° ì°¾ê¸°
        for (const character in answers) {
            if (answers[character] > maxScore) {
                maxScore = answers[character];
                resultCharacters = [character];
            } else if (answers[character] === maxScore) {
                resultCharacters.push(character);
            }
        }

        // ë™ì  ì²˜ë¦¬
        if (resultCharacters.length > 1) {
            for (const priorityType of typePriority) {
                const charactersInPriorityType = characterTypes[priorityType];
                for (const char of resultCharacters) {
                    if (charactersInPriorityType.includes(char)) {
                        return char; // ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ì˜ ìºë¦­í„° ë°˜í™˜
                    }
                }
            }
        }
        return resultCharacters[0]; // ë‹¨ì¼ ìºë¦­í„° ë˜ëŠ” ìš°ì„ ìˆœìœ„ê°€ ì—†ëŠ” ê²½ìš° ì²« ë²ˆì§¸ ìºë¦­í„° ë°˜í™˜
    }

    function updateAnalyticsData(resultCharacter, completionTime) {
        let analyticsData = getAnalyticsData();
        analyticsData.totalTests++;
        
        // ê³ ìœ  ì‚¬ìš©ì ìˆ˜ (ê°„ë‹¨í•œ ì‹ë³„ìë¡œ í˜„ì¬ëŠ” IPë‚˜ ê¸°ê¸° ì •ë³´ ì—†ì´ ë‹¨ìˆœ ì¹´ìš´íŠ¸)
        // ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ê³ ìœ  ì‚¬ìš©ì ì‹ë³„ ë¡œì§ í•„ìš”
        if (!analyticsData.uniqueUsers.includes(navigator.userAgent)) { // ë¸Œë¼ìš°ì € ì •ë³´ë¡œ ë‹¨ìˆœ ì‹ë³„
            analyticsData.uniqueUsers.push(navigator.userAgent);
        }

        // ìºë¦­í„°ë³„ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
        analyticsData.mbtiTypeCounts[resultCharacter] = (analyticsData.mbtiTypeCounts[resultCharacter] || 0) + 1;
        
        // 4ì°¨ì›ë³„ ë¶„í¬ (ìƒˆë¡œìš´ ìœ í˜•ìœ¼ë¡œ ë³€ê²½) ì—…ë°ì´íŠ¸
        for (const typeKey in characterTypes) {
            if (characterTypes[typeKey].includes(resultCharacter)) {
                analyticsData.dimensionCounts[typeKey]++;
                break;
            }
        }

        analyticsData.completionTimes.push(completionTime);
        saveAnalyticsData(analyticsData);
    }

    function showResult(resultCharacter) {
        const result = mbtiResults[resultCharacter];
        
        document.getElementById('testPage').style.display = 'none';
        document.getElementById('resultPage').style.display = 'block';
        
        document.getElementById('resultType').textContent = resultCharacter;
        document.getElementById('resultTitle').textContent = result.title;
        document.getElementById('resultDescription').textContent = result.description;
        
        const traitsContainer = document.getElementById('traits');
        traitsContainer.innerHTML = '';
        
        result.traits.forEach(trait => {
            const traitElement = document.createElement('div');
            traitElement.className = 'trait';
            traitElement.innerHTML = `
                <div class="trait-title">${trait.title}</div>
                <div class="trait-desc">${trait.desc}</div>
            `;
            traitsContainer.appendChild(traitElement);
        });
    }

    function restartTest() {
        currentQuestion = 0;
        // ëª¨ë“  ìºë¦­í„°ì˜ ì ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”
        answers = {
            "ê°ìêµ°": 0, "ë°”ë‚˜ë‹ˆ": 0, "ì• í”Œë§": 0, "ë°°ë§": 0,
            "íŒŒì¸íŒ¡": 0, "í‚¤ìœ„í‚¹": 0, "ë¸”ë£¨íŒ¡": 0, "ë ˆëª¨ë§": 0,
            "ë”¸ê¸°íŒ¡": 0, "ì²´ë¦¬ë§": 0, "ë§ê³ ëª½": 0, "ì˜¤ë Œì§€íŒŸ": 0, "ìˆ˜ë°•íŒ¡": 0,
            "í¬ë„êµ°": 0, "ë ˆë“œì• í”Œ": 0, "ë‹¨ë°°ë§": 0
        };
        selectedOption = null;
        
        document.getElementById('resultPage').style.display = 'none';
        document.getElementById('startPage').style.display = 'block';
    }

    let mbtiTypeChartInstance = null;
    let dimensionChartInstance = null;

    function showAnalyticsPage() {
        document.getElementById('startPage').style.display = 'none';
        document.getElementById('testPage').style.display = 'none';
        document.getElementById('resultPage').style.display = 'none';
        document.getElementById('analyticsPage').style.display = 'block';
        
        loadAnalyticsData();
    }

    function loadAnalyticsData() {
        const analyticsData = getAnalyticsData();

        document.getElementById('totalTests').textContent = analyticsData.totalTests;
        document.getElementById('uniqueUsers').textContent = analyticsData.uniqueUsers.length;

        // ê°€ì¥ ë§ì€ ìœ í˜• ì°¾ê¸°
        let mostFrequentType = '-';
        let maxCount = 0;
        for (const type in analyticsData.mbtiTypeCounts) {
            if (analyticsData.mbtiTypeCounts[type] > maxCount) {
                maxCount = analyticsData.mbtiTypeCounts[type];
                mostFrequentType = type;
            } else if (analyticsData.mbtiTypeCounts[type] === maxCount && maxCount > 0) {
                // ë™ì  ì²˜ë¦¬ (ìš°ì„ ìˆœìœ„ëŠ” ì—¬ê¸°ì„œ ì§ì ‘ ì²˜ë¦¬í•˜ì§€ ì•Šê³ , calculateResultCharacterì—ì„œ ê²°ì •ëœ ê²°ê³¼ë¥¼ ì‚¬ìš©)
                // ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœíˆ ê°€ì¥ ë§ì€ ìœ í˜•ì„ í‘œì‹œ
                // ì—¬ëŸ¬ ê°œê°€ ë™ì ì¼ ê²½ìš°, ì²« ë²ˆì§¸ë¡œ ë°œê²¬ëœ ìœ í˜•ì„ í‘œì‹œ
            }
        }
        document.getElementById('mostFrequentType').textContent = mostFrequentType;

        // í‰ê·  ì™„ë£Œ ì‹œê°„
        const totalCompletionTime = analyticsData.completionTimes.reduce((sum, time) => sum + time, 0);
        const avgCompletionTime = analyticsData.completionTimes.length > 0 ? (totalCompletionTime / analyticsData.completionTimes.length).toFixed(2) : 0;
        document.getElementById('avgCompletionTime').textContent = avgCompletionTime;

        // ìºë¦­í„°ë³„ ë¶„í¬ ì°¨íŠ¸
        const characterLabels = Object.keys(analyticsData.mbtiTypeCounts).sort();
        const characterData = characterLabels.map(label => analyticsData.mbtiTypeCounts[label] || 0);

        if (mbtiTypeChartInstance) {
            mbtiTypeChartInstance.destroy();
        }
        mbtiTypeChartInstance = new Chart(document.getElementById('mbtiTypeChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: characterLabels,
                datasets: [{
                    label: 'ìºë¦­í„°ë³„ í…ŒìŠ¤íŠ¸ ìˆ˜',
                    data: characterData,
                    backgroundColor: 'rgba(74, 144, 226, 0.6)',
                    borderColor: 'rgba(74, 144, 226, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'ìºë¦­í„°ë³„ ë¶„í¬'
                    }
                }
            }
        });

        // 4ì°¨ì›ë³„ ë¶„í¬ ì°¨íŠ¸ (ìƒˆë¡œìš´ ìœ í˜•ìœ¼ë¡œ ë³€ê²½)
        const dimensionLabels = ["ì•ˆì •í˜•", "íƒí—˜í˜•", "ì—°ê²°í˜•", "ì§‘ì¤‘í˜•"];
        const dimensionData = dimensionLabels.map(label => analyticsData.dimensionCounts[label] || 0);

        if (dimensionChartInstance) {
            dimensionChartInstance.destroy();
        }
        dimensionChartInstance = new Chart(document.getElementById('dimensionChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: dimensionLabels,
                datasets: [{
                    label: 'ìœ í˜•ë³„ í…ŒìŠ¤íŠ¸ ìˆ˜',
                    data: dimensionData,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.6)',
                        'rgba(54, 162, 235, 0.6)',
                        'rgba(255, 206, 86, 0.6)',
                        'rgba(75, 192, 192, 0.6)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: '4ê°€ì§€ ìœ í˜•ë³„ ë¶„í¬'
                    }
                }
            }
        });
    }

    function goToHomePage() {
        document.getElementById('analyticsPage').style.display = 'none';
        document.getElementById('startPage').style.display = 'block';
    }
</script>

</body>
</html>
