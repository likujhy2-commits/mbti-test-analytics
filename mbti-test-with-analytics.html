<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI ì„±ê²© ìœ í˜• í…ŒìŠ¤íŠ¸ - ë°ì´í„° ìˆ˜ì§‘ ë²„ì „</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            font-size: 2.5em;
            color: #4a90e2;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 20px;
        }

        p {
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
            color: #555;
        }

        .start-button {
            padding: 18px 40px;
            font-size: 1.2em;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(74, 144, 226, 0.4);
        }

        .start-button:active {
            transform: translateY(-1px);
        }

        .info {
            margin-top: 20px;
            font-size: 0.9em;
            color: #888;
        }

        /* í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .test-container {
            max-width: 600px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .question-number {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #fafafa;
            text-align: left;
        }

        .option:hover {
            border-color: #4a90e2;
            background-color: #f0f7ff;
            transform: translateY(-2px);
        }

        .option.selected {
            border-color: #4a90e2;
            background-color: #e3f2fd;
        }

        .next-button {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        .next-button.active {
            opacity: 1;
            pointer-events: auto;
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
        }

        /* ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .result-container {
            max-width: 700px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .result-type {
            font-size: 3em;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .result-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #555;
        }

        .traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .trait {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #4a90e2;
        }

        .trait-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 5px;
        }

        .trait-desc {
            font-size: 0.9em;
            color: #666;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .restart-button, .analytics-button, .export-button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid;
        }

        .restart-button {
            color: #4a90e2;
            background-color: transparent;
            border-color: #4a90e2;
        }

        .restart-button:hover {
            background-color: #4a90e2;
            color: #fff;
            transform: translateY(-2px);
        }

        .analytics-button {
            color: #28a745;
            background-color: transparent;
            border-color: #28a745;
        }

        .analytics-button:hover {
            background-color: #28a745;
            color: #fff;
            transform: translateY(-2px);
        }

        .export-button {
            color: #ffc107;
            background-color: transparent;
            border-color: #ffc107;
        }

        .export-button:hover {
            background-color: #ffc107;
            color: #fff;
            transform: translateY(-2px);
        }

        /* ë¶„ì„ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .analytics-container {
            max-width: 800px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .analytics-title {
            font-size: 2em;
            color: #28a745;
            margin-bottom: 30px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border-left: 4px solid #28a745;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .mbti-chart {
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .mbti-bar {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .mbti-label {
            width: 80px;
            font-weight: bold;
            color: #4a90e2;
        }

        .mbti-progress {
            flex: 1;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 0 10px;
            overflow: hidden;
        }

        .mbti-fill {
            height: 100%;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .mbti-count {
            width: 30px;
            text-align: right;
            font-weight: bold;
            color: #666;
        }

        .back-button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #6c757d;
            background-color: transparent;
            border: 2px solid #6c757d;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background-color: #6c757d;
            color: #fff;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

<div class="container" id="startPage">
    <h1>MBTI ì„±ê²© ìœ í˜• í…ŒìŠ¤íŠ¸</h1>
    <div class="subtitle">Myers-Briggs Type Indicator</div>
    <p>16ê°€ì§€ ì„±ê²© ìœ í˜• ì¤‘ ë‹¹ì‹ ì˜ ì§„ì§œ ëª¨ìŠµì„ ì°¾ì•„ë³´ì„¸ìš”!<br>ì´ 20ê°œì˜ ì§ˆë¬¸ìœ¼ë¡œ êµ¬ì„±ëœ ì •í™•í•œ ì„±ê²© ë¶„ì„ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p>
    <button class="start-button" onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
    <div class="info">â±ï¸ ì†Œìš”ì‹œê°„: ì•½ 5ë¶„</div>
</div>

<div class="test-container" id="testPage">
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="question-number" id="questionNumber">ì§ˆë¬¸ 1 / 20</div>
    <div class="question" id="questionText"></div>
    <div class="options" id="options"></div>
    <button class="next-button" id="nextButton" onclick="nextQuestion()">ë‹¤ìŒ ì§ˆë¬¸</button>
</div>

<div class="result-container" id="resultPage">
    <div class="result-type" id="resultType"></div>
    <div class="result-title" id="resultTitle"></div>
    <div class="result-description" id="resultDescription"></div>
    <div class="traits" id="traits"></div>
    <div class="button-group">
        <button class="restart-button" onclick="restartTest()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
        <button class="analytics-button" onclick="showAnalytics()">ë°ì´í„° ë¶„ì„ ë³´ê¸°</button>
        <button class="export-button" onclick="exportData()">ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
    </div>
</div>

<div class="analytics-container" id="analyticsPage">
    <div class="analytics-title">ğŸ“Š í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¶„ì„</div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number" id="totalTests">0</div>
            <div class="stat-label">ì´ í…ŒìŠ¤íŠ¸ ìˆ˜</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="uniqueUsers">0</div>
            <div class="stat-label">ê³ ìœ  ì‚¬ìš©ì ìˆ˜</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="mostCommonType">-</div>
            <div class="stat-label">ê°€ì¥ ë§ì€ ìœ í˜•</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="avgCompletionTime">0</div>
            <div class="stat-label">í‰ê·  ì™„ë£Œ ì‹œê°„(ë¶„)</div>
        </div>
    </div>

    <div class="mbti-chart">
        <div class="chart-title">MBTI ìœ í˜•ë³„ ë¶„í¬</div>
        <div id="mbtiDistribution"></div>
    </div>

    <div class="mbti-chart">
        <div class="chart-title">4ì°¨ì›ë³„ ë¶„í¬</div>
        <div id="dimensionDistribution"></div>
    </div>

    <div class="mbti-chart">
        <div class="chart-title">SNS ì‚¬ìš© ë¶„í¬</div>
        <div id="snsDistribution"></div>
    </div>

    <button class="back-button" onclick="backToResult()">ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<script>
    // MBTI ì§ˆë¬¸ ë°ì´í„°
    const questions = [
        {
            question: "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ë‹¹ì‹ ì€ ì£¼ë¡œ ì–´ë–¤ ì—­í• ì„ ì„ í˜¸í•˜ë‚˜ìš”?",
            options: [
                { text: "íŒ€ì›ë“¤ê³¼ í™œë°œí•˜ê²Œ ì†Œí†µí•˜ë©° ì•„ì´ë””ì–´ë¥¼ ë‚´ê³  ì—ë„ˆì§€ë¥¼ ë¶ˆì–´ë„£ëŠ” ì—­í• ", type: "E" },
                { text: "í˜¼ì ì¶©ë¶„íˆ ìë£Œë¥¼ ë¶„ì„í•˜ê³  ì‹ ì¤‘í•˜ê²Œ ê³„íšì„ ì„¸ìš°ëŠ” ì—­í• ", type: "I" },
                { text: "ëª…í™•í•œ ëª©í‘œì™€ ì ˆì°¨ë¥¼ ì„¤ì •í•˜ê³  ì „ì²´ì ì¸ ì§„í–‰ì„ ê´€ë¦¬í•˜ëŠ” ì—­í• ", type: "J" },
                { text: "ìœ ì—°í•˜ê²Œ ìƒí™©ì— ë§ì¶° ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•˜ê³  ë³€í™”ë¥¼ ìˆ˜ìš©í•˜ëŠ” ì—­í• ", type: "P" }
            ]
        },
        {
            question: "ì—…ë¬´ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ë¬¸ì œì— ì§ë©´í–ˆì„ ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ëŒ€ì‘í•˜ë‚˜ìš”?",
            options: [
                { text: "ê¸°ì¡´ì˜ ì„±ê³µ ì‚¬ë¡€ë‚˜ ê²€ì¦ëœ ë°ì´í„°ì— ê¸°ë°˜í•˜ì—¬ ì‹¤ìš©ì ì¸ í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤", type: "S" },
                { text: "í‹€ì— ì–½ë§¤ì´ì§€ ì•Šê³  ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¥¼ ë°œìƒí•˜ì—¬ ìƒˆë¡œìš´ í•´ê²°ì±…ì„ ëª¨ìƒ‰í•œë‹¤", type: "N" },
                { text: "ë¬¸ì œì˜ í•µì‹¬ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ê°ê´€ì ì¸ ì‚¬ì‹¤ì— ë”°ë¼ íŒë‹¨í•œë‹¤", type: "T" },
                { text: "ê´€ë ¨ìë“¤ì˜ ì…ì¥ê³¼ ê°ì •ì„ ê³ ë ¤í•˜ì—¬ ëª¨ë‘ê°€ ë™ì˜í•  ìˆ˜ ìˆëŠ” ë°©í–¥ì„ ì°¾ëŠ”ë‹¤", type: "F" }
            ]
        },
        {
            question: "ë™ë£Œì™€ í˜‘ì—…í•  ë•Œ ë‹¹ì‹ ì€ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ê¸°ì—¬í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•˜ë‚˜ìš”?",
            options: [
                { text: "íŒ€ì›ë“¤ì—ê²Œ ì ê·¹ì ìœ¼ë¡œ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ê³  ê¸ì •ì ì¸ ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•œë‹¤", type: "E" },
                { text: "ê°ìì˜ ì—­í• ì„ ëª…í™•íˆ í•˜ê³  ë…ë¦½ì ìœ¼ë¡œ ìì‹ ì˜ ì—…ë¬´ì— ì§‘ì¤‘í•œë‹¤", type: "I" },
                { text: "êµ¬ì²´ì ì¸ ë°ì´í„°ì™€ ì‚¬ì‹¤ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì‹¤ì ì¸ ì˜ê²¬ì„ ì œì‹œí•œë‹¤", type: "S" },
                { text: "ë¯¸ë˜ë¥¼ ë‚´ë‹¤ë³´ê³  ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì´ë‚˜ ë¹„ì „ì„ ì œì‹œí•˜ë©° ì˜ê°ì„ ì¤€ë‹¤", type: "N" }
            ]
        },
        {
            question: "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ê±°ë‚˜ ì¬ì¶©ì „ì´ í•„ìš”í•  ë•Œ ë‹¹ì‹ ì€ ì£¼ë¡œ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?",
            options: [
                { text: "ì‚¬ëŒë“¤ê³¼ ë§Œë‚˜ê±°ë‚˜ í™œë™ì ì¸ ì·¨ë¯¸ë¥¼ í†µí•´ ì—ë„ˆì§€ë¥¼ ì–»ëŠ”ë‹¤", type: "E" },
                { text: "í˜¼ì ì¡°ìš©íˆ ìƒê°í•˜ê±°ë‚˜ íœ´ì‹ì„ ì·¨í•˜ë©° ë‚´ë©´ì˜ ì—ë„ˆì§€ë¥¼ íšŒë³µí•œë‹¤", type: "I" },
                { text: "ë¬¸ì œì˜ ì›ì¸ì„ ë¶„ì„í•˜ê³  í•´ê²° ë°©ì•ˆì„ ë…¼ë¦¬ì ìœ¼ë¡œ ê³ ë¯¼í•œë‹¤", type: "T" },
                { text: "ì¹œí•œ ì‚¬ëŒë“¤ê³¼ ê°ì •ì„ ê³µìœ í•˜ë©° ìœ„ë¡œì™€ ê³µê°ì„ ì–»ìœ¼ë ¤ í•œë‹¤", type: "F" }
            ]
        },
        {
            question: "ë‹¤ìŒ ì¤‘ ë‹¹ì‹ ì´ ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” SNS í”Œë«í¼ì€ ë¬´ì—‡ì¸ê°€ìš”? (ëª¨ë‘ ì„ íƒ ê°€ëŠ¥)",
            options: [
                { text: "ì¸ìŠ¤íƒ€ê·¸ë¨ (ì‚¬ì§„/ì˜ìƒ ê³µìœ  ì¤‘ì‹¬)", type: "SNS_INSTA" },
                { text: "ìœ íŠœë¸Œ (ì˜ìƒ ì½˜í…ì¸  ì¤‘ì‹¬)", type: "SNS_YT" },
                { text: "í˜ì´ìŠ¤ë¶ (ì§€ì¸ê³¼ì˜ ì†Œí†µ, ê·¸ë£¹ í™œë™ ì¤‘ì‹¬)", type: "SNS_FB" },
                { text: "í‹±í†¡ (ì§§ì€ ì˜ìƒ ì½˜í…ì¸  ì¤‘ì‹¬)", type: "SNS_TIKTOK" },
                { text: "X (íŠ¸ìœ„í„°) (ì‹¤ì‹œê°„ ì •ë³´, í…ìŠ¤íŠ¸ ê¸°ë°˜ ì†Œí†µ ì¤‘ì‹¬)", type: "SNS_X" },
                { text: "ë„¤ì´ë²„ ë¸”ë¡œê·¸ (ê°œì¸ ê¸°ë¡, ì „ë¬¸ ì •ë³´ ê³µìœ  ì¤‘ì‹¬)", type: "SNS_NAVER_BLOG" },
                { text: "ì˜¨ë¼ì¸ ì¹´í˜/ì»¤ë®¤ë‹ˆí‹° (íŠ¹ì • ê´€ì‹¬ì‚¬ ê¸°ë°˜ ì†Œí†µ ì¤‘ì‹¬)", type: "SNS_CAFE" },
                { text: "ìŠ¤ë ˆë“œ (ì¸ìŠ¤íƒ€ê·¸ë¨ ê¸°ë°˜ í…ìŠ¤íŠ¸ ì†Œí†µ)", type: "SNS_THREAD" },
                { text: "ë§í¬ë“œì¸ (ì§ì—…, ë¹„ì¦ˆë‹ˆìŠ¤ ë„¤íŠ¸ì›Œí‚¹ ì¤‘ì‹¬)", type: "SNS_LINKEDIN" },
                { text: "ê¸°íƒ€ (ìœ„ì— ì—†ëŠ” ë‹¤ë¥¸ SNS)", type: "SNS_ETC" }
            ],
            allowMultiple: true // ì¤‘ë³µ ì„ íƒ í—ˆìš©
        }
    ];

    // MBTI ê²°ê³¼ ë°ì´í„° (ê¸°ì¡´ê³¼ ë™ì¼)
    const mbtiResults = {
        "INTJ": { title: "ì „ëµ ê¸°íšì / ì—°êµ¬ ê°œë°œì", description: "ë…¼ë¦¬ì ì´ê³  í†µì°°ë ¥ì´ ë›°ì–´ë‚˜ ì „ëµì„ ì„¸ìš°ê³  ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤. ì—°êµ¬, ê°œë°œ, ê¸°íš ë¶„ì•¼ì— ê°•ì ì„ ë³´ì…ë‹ˆë‹¤.", traits: [{ title: "ë¶„ì„ì ", desc: "ë¬¸ì œì˜ ë³¸ì§ˆì„ íŒŒì•…í•˜ê³  í•´ê²°ì±… ì œì‹œ" }, { title: "ë…ë¦½ì ", desc: "ìì‹ ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ê¹Šì´ ìˆëŠ” íƒêµ¬" }, { title: "ì¥ê¸°ì  ê´€ì ", desc: "ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ê³  ê³„íš ìˆ˜ë¦½" }, { title: "ì‹¤í–‰ë ¥", desc: "ì„¸ìš´ ì „ëµì„ ê¾¸ì¤€íˆ ì¶”ì§„" }] },
        "INTP": { title: "ë°ì´í„° ë¶„ì„ê°€ / í•™ì", description: "ìƒˆë¡œìš´ ì´ë¡ ê³¼ ì§€ì‹ íƒêµ¬ì— ì—´ì •ì ì´ë©°, ë³µì¡í•œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì°½ì¶œí•˜ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ì—°êµ¬, IT, ë°ì´í„° ê´€ë ¨ ì§ë¬´ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ë…¼ë¦¬ì ", desc: "ê°ê´€ì  ì‚¬ì‹¤ê³¼ ë…¼ë¦¬ë¡œ ì‚¬ê³ " }, { title: "ì°½ì˜ì ", desc: "ìƒˆë¡­ê³  ë…ì°½ì ì¸ ì•„ì´ë””ì–´ ì œì‹œ" }, { title: "ì§€ì  í˜¸ê¸°ì‹¬", desc: "ëŠì„ì—†ì´ ë°°ìš°ê³  íƒêµ¬" }, { title: "ììœ¨ì„±", desc: "ê·œì¹™ë³´ë‹¤ ììœ ë¡œìš´ ì‚¬ê³  ì„ í˜¸" }] },
        "ENTJ": { title: "ê²½ì˜ ì»¨ì„¤í„´íŠ¸ / ë¦¬ë”", description: "íƒ€ê³ ë‚œ ë¦¬ë”ì‹­ê³¼ ëª©í‘œ ì§€í–¥ì ì¸ ì„±í–¥ìœ¼ë¡œ ì¡°ì§ì„ ì´ëŒê³  ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ë° ë›°ì–´ë‚©ë‹ˆë‹¤. ê²½ì˜, ì»¨ì„¤íŒ…, ê´€ë¦¬ì§ì— ê°•ì ì„ ë³´ì…ë‹ˆë‹¤.", traits: [{ title: "ë¦¬ë”ì‹­", desc: "ê°•ë ¥í•œ ë¦¬ë”ì‹­ìœ¼ë¡œ ì¡°ì§ ì´ëŒê¸°" }, { title: "ì¶”ì§„ë ¥", desc: "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ ê³¼ê°í•˜ê²Œ ì¶”ì§„" }, { title: "ì „ëµê°€", desc: "íš¨ìœ¨ì ì¸ ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰" }, { title: "ë„ì „ì ", desc: "ìƒˆë¡œìš´ ëª©í‘œì— ëŠì„ì—†ì´ ë„ì „" }] },
        "ENTP": { title: "ìŠ¤íƒ€íŠ¸ì—… CEO / ê¸°íšì", description: "ì°½ì˜ì ì´ê³  í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¡œ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ì°¾ì•„ë‚´ê³ , ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ê³¼ í˜‘ë ¥í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë°œì „ì‹œí‚¤ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ìŠ¤íƒ€íŠ¸ì—…, ê¸°íš, ë§ˆì¼€íŒ… ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "í˜ì‹ ì ", desc: "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ê°€ëŠ¥ì„± íƒìƒ‰" }, { title: "ë‹¤ì¬ë‹¤ëŠ¥", desc: "ë‹¤ì–‘í•œ ë¶„ì•¼ì— ì¬ëŠ¥ê³¼ ê´€ì‹¬" }, { title: "í† ë¡ ê°€", desc: "ì§€ì ì¸ í† ë¡ ê³¼ ë…¼ìŸì„ ì¦ê¹€" }, { title: "ìœµí†µì„±", desc: "ë³€í™”ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜" }] },
        "INFJ": { title: "ì‹¬ë¦¬ ìƒë‹´ê°€ / êµìœ¡ì", description: "í†µì°°ë ¥ê³¼ ê³µê° ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ ì‚¬ëŒë“¤ì˜ ë‚´ë©´ì„ ì´í•´í•˜ê³  ì„±ì¥ì„ ë•ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤. ìƒë‹´, êµìœ¡, ì‚¬íšŒë³µì§€ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ê³µê° ëŠ¥ë ¥", desc: "íƒ€ì¸ì˜ ê°ì •ì„ ê¹Šì´ ì´í•´" }, { title: "ì´ìƒì£¼ì˜", desc: "ì„¸ìƒì„ ë” ë‚˜ì€ ê³³ìœ¼ë¡œ ë§Œë“¤ê³ ì í•¨" }, { title: "í†µì°°ë ¥", desc: "ì‚¬ëŒê³¼ ìƒí™©ì˜ ë³¸ì§ˆì„ ê¿°ëš«ì–´ ë´„" }, { title: "í—Œì‹ ì ", desc: "ìì‹ ì´ ë¯¿ëŠ” ê°€ì¹˜ì— í—Œì‹ " }] },
        "INFP": { title: "ì‘ê°€ / ì˜ˆìˆ ê°€", description: "ì°½ì˜ì ì´ê³  ê°ìˆ˜ì„±ì´ í’ë¶€í•˜ë©°, ìì‹ ë§Œì˜ ë…íŠ¹í•œ ì„¸ê³„ë¥¼ í‘œí˜„í•˜ê³  íƒ€ì¸ì—ê²Œ ì˜ê°ì„ ì£¼ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ì˜ˆìˆ , ë¬¸í•™, ë””ìì¸ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì°½ì˜ì ", desc: "ë…ì°½ì ì¸ ì•„ì´ë””ì–´ì™€ í‘œí˜„" }, { title: "ì´ìƒì£¼ì˜", desc: "ê°œì¸ì˜ ê°€ì¹˜ì™€ ì‹ ë… ì¤‘ì‹œ" }, { title: "ê³µê°ì ", desc: "íƒ€ì¸ì˜ ê°ì •ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘" }, { title: "ë‚´í–¥ì ", desc: "í˜¼ìë§Œì˜ ì‹œê°„ì„ í†µí•´ ì˜ê° ì–»ê¸°" }] },
        "ENFJ": { title: "HR ì „ë¬¸ê°€ / ì½”ì¹˜", description: "íƒ€ê³ ë‚œ ë¦¬ë”ì‹­ê³¼ ë›°ì–´ë‚œ ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ìœ¼ë¡œ ì‚¬ëŒë“¤ì˜ ì ì¬ë ¥ì„ ì´ëŒì–´ë‚´ê³  ë™ê¸° ë¶€ì—¬í•˜ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. HR, ì½”ì¹­, êµìœ¡, ë§ˆì¼€íŒ… ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ë¦¬ë”ì‹­", desc: "ì‚¬ëŒë“¤ì„ ì´ëŒê³  ë™ê¸° ë¶€ì—¬" }, { title: "ì†Œí†µ ì „ë¬¸ê°€", desc: "ë›°ì–´ë‚œ ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥" }, { title: "ì‚¬íšŒì„±", desc: "íƒ€ì¸ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°" }, { title: "ì´ìƒì£¼ì˜", desc: "ê¸ì •ì ì¸ ë³€í™”ë¥¼ ì¶”êµ¬" }] },
        "ENFP": { title: "ë§ˆì¼€í„° / ì½˜í…ì¸  í¬ë¦¬ì—ì´í„°", description: "ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¡œ ì‚¬ëŒë“¤ì˜ ë§ˆìŒì„ ì‚¬ë¡œì¡ê³ , ìƒˆë¡œìš´ ê²ƒì„ íƒí—˜í•˜ë©° ì¦ê±°ì›€ì„ ì°½ì¶œí•˜ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ë§ˆì¼€íŒ…, í™ë³´, ì½˜í…ì¸  ì œì‘ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì—´ì •ì ", desc: "ì¼ì— ëŒ€í•œ ê°•í•œ ì—´ì •ê³¼ ì—ë„ˆì§€" }, { title: "ì°½ì˜ì ", desc: "ë…ì°½ì ì¸ ì•„ì´ë””ì–´ì™€ ë°œìƒ" }, { title: "ì‚¬êµì ", desc: "ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ë©° ì˜ê° ì–»ê¸°" }, { title: "ììœ ë¡œìš´ ì˜í˜¼", desc: "í‹€ì— ì–½ë§¤ì´ì§€ ì•Šê³  ìœ ì—°í•¨" }] },
        "ISTJ": { title: "ê³µë¬´ì› / íšŒê³„ì‚¬", description: "ì‹¤ìš©ì ì´ê³  ì±…ì„ê°ì´ ê°•í•˜ë©°, ì •í•´ì§„ ì ˆì°¨ì™€ ê·œì¹™ì— ë”°ë¼ ì—…ë¬´ë¥¼ ì •í™•í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ê³µë¬´ì›, íšŒê³„, ê´€ë¦¬, í–‰ì • ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì •í™•ì„±", desc: "ì •í™•í•˜ê³  ì„¸ë°€í•˜ê²Œ ì—…ë¬´ ì²˜ë¦¬" }, { title: "ì±…ì„ê°", desc: "ë§¡ì€ ì¼ì— ëŒ€í•œ ê°•í•œ ì±…ì„ê°" }, { title: "ì‹¤ìš©ì ", desc: "í˜„ì‹¤ì ì¸ ë¬¸ì œ í•´ê²°ì— ëŠ¥í•¨" }, { title: "ì„±ì‹¤í•¨", desc: "ê¾¸ì¤€í•˜ê³  ì„±ì‹¤í•˜ê²Œ ë…¸ë ¥" }] },
        "ISFJ": { title: "ê°„í˜¸ì‚¬ / ì‚¬íšŒë³µì§€ì‚¬", description: "íƒ€ì¸ì„ ë°°ë ¤í•˜ê³  í—Œì‹ ì ì´ë©°, ì•ˆì •ì ì¸ í™˜ê²½ì—ì„œ ì‚¬ëŒë“¤ì„ ë•ëŠ” ë° ë³´ëŒì„ ëŠë‚ë‹ˆë‹¤. ì˜ë£Œ, ë³µì§€, êµìœ¡, ì„œë¹„ìŠ¤ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ë°°ë ¤ì‹¬", desc: "íƒ€ì¸ì˜ í•„ìš”ë¥¼ ì„¸ì‹¬í•˜ê²Œ ëŒë´„" }, { title: "í—Œì‹ ì ", desc: "íƒ€ì¸ì„ ìœ„í•´ ê¸°êº¼ì´ í¬ìƒ" }, { title: "ì‹¤ìš©ì ", desc: "í˜„ì‹¤ì ì¸ ë„ì›€ê³¼ ì§€ì› ì œê³µ" }, { title: "ì•ˆì •ì„±", desc: "ì•ˆì •ì ì¸ ê´€ê³„ì™€ í™˜ê²½ ì„ í˜¸" }] },
        "ESTJ": { title: "ê²½ì°°ê´€ / ê´€ë¦¬ì", description: "ì²´ê³„ì ì´ê³  í˜„ì‹¤ì ì¸ ë¦¬ë”ì‹­ìœ¼ë¡œ ì¡°ì§ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ê´€ë¦¬ì§, ê³µê³µ ì„œë¹„ìŠ¤, êµ°ì¸, ì˜ì—… ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ê´€ë¦¬ ëŠ¥ë ¥", desc: "ì¡°ì§ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬" }, { title: "í˜„ì‹¤ì ", desc: "ê°ê´€ì ì¸ ì‚¬ì‹¤ì— ê¸°ë°˜í•œ íŒë‹¨" }, { title: "ê²°ë‹¨ë ¥", desc: "ì‹ ì†í•˜ê³  ë‹¨í˜¸í•œ ê²°ì •" }, { title: "ì±…ì„ê°", desc: "ë§¡ì€ ì„ë¬´ì— ëŒ€í•œ ê°•í•œ ì±…ì„" }] },
        "ESFJ": { title: "êµì‚¬ / íŒë§¤ ê´€ë¦¬ì", description: "ì¹œí™”ë ¥ì´ ì¢‹ê³  í˜‘ë ¥ì„ ì¤‘ì‹œí•˜ë©°, ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ê³  ì¡°í™”ë¡œìš´ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“œëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. êµìœ¡, ì„œë¹„ìŠ¤, íŒë§¤, HR ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì¹œí™”ë ¥", desc: "ì‚¬ëŒë“¤ê³¼ ì‰½ê²Œ ì–´ìš¸ë¦¬ê³  ì†Œí†µ" }, { title: "í˜‘ë ¥ì ", desc: "íŒ€ì›Œí¬ì™€ ì¡°í™”ë¥¼ ì¤‘ì‹œ" }, { title: "ì‹¤ìš©ì ", desc: "í˜„ì‹¤ì ì¸ ë„ì›€ê³¼ ì¡°ì–¸ ì œê³µ" }, { title: "ë°°ë ¤ì‹¬", desc: "íƒ€ì¸ì˜ ê°ì •ì„ ì´í•´í•˜ê³  ê³µê°" }] },
        "ISTP": { title: "ì—”ì§€ë‹ˆì–´ / ê¸°ìˆ  ì „ë¬¸ê°€", description: "ì‹¤ìš©ì ì´ê³  ë¶„ì„ì ì´ë©°, ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì§ì ‘ ì†ìœ¼ë¡œ ë§Œë“¤ê³  ì¡°ì‘í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì—”ì§€ë‹ˆì–´ë§, ê¸°ìˆ  ê°œë°œ, ì¥ì¸ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì‹¤ìš©ì ", desc: "ì‹¤ì§ˆì ì¸ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥" }, { title: "ë¶„ì„ì ", desc: "ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ê³  ë¶„ì„" }, { title: "ë…ë¦½ì ", desc: "ìì‹ ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ë¬¸ì œ í•´ê²°" }, { title: "ìœ ì—°ì„±", desc: "ìƒˆë¡œìš´ ë„êµ¬ì™€ ê¸°ìˆ  ìŠµë“" }] },
        "ISFP": { title: "ë””ìì´ë„ˆ / ìŒì•…ê°€", description: "ê°ê°ì ì´ê³  ì˜ˆìˆ ì ì¸ ì¬ëŠ¥ìœ¼ë¡œ ì•„ë¦„ë‹¤ì›€ì„ ì°½ì¡°í•˜ê³ , ììœ ë¡œìš´ ë¶„ìœ„ê¸°ì—ì„œ ìì‹ ì„ í‘œí˜„í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì˜ˆìˆ , ë””ìì¸, ìŒì•…, íŒ¨ì…˜ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì˜ˆìˆ ì  ê°ê°", desc: "ì•„ë¦„ë‹¤ì›€ì„ ì°½ì¡°í•˜ê³  í‘œí˜„" }, { title: "ììœ ë¡œìš´", desc: "í‹€ì— ì–½ë§¤ì´ì§€ ì•Šê³  ì°½ì‘" }, { title: "ê°ìˆ˜ì„±", desc: "ì„¸ë°€í•œ ê°ê°ê³¼ ê´€ì°°ë ¥" }, { title: "í˜„ì¬ ì§€í–¥", desc: "í˜„ì¬ì˜ ìˆœê°„ì„ ì¦ê¸°ê³  ì§‘ì¤‘" }] },
        "ESTP": { title: "ì˜ì—… / ìŠ¤í¬ì¸  ì—ì´ì „íŠ¸", description: "í™œë™ì ì´ê³  ì¦‰í¥ì ì´ë©°, ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•˜ë©° ë¹ ë¥´ê²Œ ìƒí™©ì„ íŒŒì•…í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ì˜ì—…, ìŠ¤í¬ì¸ , ê¸°ì—…ê°€, ë§ˆì¼€íŒ… ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "í™œë™ì ", desc: "ì—ë„ˆì§€ ë„˜ì¹˜ê³  í™œë™ì ì¸ ì„±í–¥" }, { title: "ì‹¤ìš©ì ", desc: "í˜„ì‹¤ì ì¸ ë¬¸ì œ í•´ê²°ì— ëŠ¥í•¨" }, { title: "ì ì‘ë ¥", desc: "ë¹ ë¥´ê²Œ ë³€í™”ì— ì ì‘í•˜ê³  ëŒ€ì²˜" }, { title: "ì„¤ë“ë ¥", desc: "ì‚¬ëŒë“¤ì„ ì„¤ë“í•˜ê³  ë™ê¸° ë¶€ì—¬" }] },
        "ESFP": { title: "ì´ë²¤íŠ¸ ê¸°íšì / ì—°ì˜ˆì¸", description: "ì‚¬êµì ì´ê³  ë‚™ì²œì ì´ë©°, ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë ¤ ì¦ê±°ì›€ì„ ê³µìœ í•˜ê³  í™œê¸°ì°¬ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“œëŠ” ë° ëŠ¥í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸, ê³µì—°, ì—”í„°í…Œì¸ë¨¼íŠ¸, ì„œë¹„ìŠ¤ ë¶„ì•¼ì— ì í•©í•©ë‹ˆë‹¤.", traits: [{ title: "ì‚¬êµì ", desc: "ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ëŠ” ê²ƒì„ ì¦ê¹€" }, { title: "ë‚™ì²œì ", desc: "ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „íŒŒ" }, { title: "ì¦‰í¥ì ", desc: "ìƒí™©ì— ë§ì¶° ìœ ì—°í•˜ê²Œ í–‰ë™" }, { title: "ì¬ë¯¸ ì¶”êµ¬", desc: "ì‚¶ì˜ ì¦ê±°ì›€ê³¼ í–‰ë³µì„ ì¤‘ìš”ì‹œ" }] }
    };

    let currentQuestion = 0;
    let answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0, SNS_INSTA: 0, SNS_YT: 0, SNS_FB: 0, SNS_TIKTOK: 0, SNS_X: 0, SNS_NAVER_BLOG: 0, SNS_CAFE: 0, SNS_THREAD: 0, SNS_LINKEDIN: 0, SNS_ETC: 0 };
    let selectedOption = null;
    let testStartTime = null;
    let userAnswers = [];

    // ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬ í•¨ìˆ˜ë“¤
    function saveTestData(mbtiType, completionTime) {
        const testData = {
            id: Date.now(),
            timestamp: new Date().toISOString(),
            mbtiType: mbtiType,
            completionTime: completionTime,
            answers: userAnswers,
            userAgent: navigator.userAgent,
            screenResolution: `${screen.width}x${screen.height}`
        };

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê¸°ì¡´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        let allTests = JSON.parse(localStorage.getItem('mbtiTests') || '[]');
        allTests.push(testData);
        
        // ìµœëŒ€ 1000ê°œê¹Œì§€ë§Œ ì €ì¥ (ë©”ëª¨ë¦¬ ê´€ë¦¬)
        if (allTests.length > 1000) {
            allTests = allTests.slice(-1000);
        }
        
        localStorage.setItem('mbtiTests', JSON.stringify(allTests));
        return testData;
    }

    function getAnalyticsData() {
        const allTests = JSON.parse(localStorage.getItem('mbtiTests') || '[]');
        
        // MBTI ìœ í˜•ë³„ ë¶„í¬ ê³„ì‚°
        const mbtiDistribution = {};
        const dimensionDistribution = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        let totalCompletionTime = 0;
        const uniqueUsers = new Set();
        const snsDistribution = { SNS_INSTA: 0, SNS_YT: 0, SNS_FB: 0, SNS_TIKTOK: 0, SNS_X: 0, SNS_NAVER_BLOG: 0, SNS_CAFE: 0, SNS_THREAD: 0, SNS_LINKEDIN: 0, SNS_ETC: 0 };

        allTests.forEach(test => {
            // MBTI ìœ í˜• ë¶„í¬
            mbtiDistribution[test.mbtiType] = (mbtiDistribution[test.mbtiType] || 0) + 1;
            
            // ì°¨ì›ë³„ ë¶„í¬
            const dimensions = test.mbtiType.split('');
            dimensions.forEach(dim => {
                if (dimensionDistribution.hasOwnProperty(dim)) {
                    dimensionDistribution[dim]++;
                }
            });
            
            // SNS ë¶„í¬
            test.answers.forEach(answer => {
                if (answer.selectedType && answer.selectedType.startsWith('SNS_')) {
                    snsDistribution[answer.selectedType]++;
                }
            });
            
            // ì™„ë£Œ ì‹œê°„
            totalCompletionTime += test.completionTime;
            
            // ê³ ìœ  ì‚¬ìš©ì (ê°„ë‹¨í•œ ë°©ë²•: IP ëŒ€ì‹  ë¸Œë¼ìš°ì € ì •ë³´ ì‚¬ìš©)
            uniqueUsers.add(test.userAgent);
        });

        return {
            totalTests: allTests.length,
            uniqueUsers: uniqueUsers.size,
            mbtiDistribution,
            dimensionDistribution,
            snsDistribution,
            avgCompletionTime: allTests.length > 0 ? Math.round(totalCompletionTime / allTests.length) : 0,
            mostCommonType: Object.keys(mbtiDistribution).reduce((a, b) => 
                mbtiDistribution[a] > mbtiDistribution[b] ? a : b, '-')
        };
    }

    function startTest() {
        testStartTime = Date.now();
        userAnswers = [];
        document.getElementById('startPage').style.display = 'none';
        document.getElementById('testPage').style.display = 'block';
        showQuestion();
    }

    function showQuestion() {
        const question = questions[currentQuestion];
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        
        document.getElementById('progressFill').style.width = progress + '%';
        document.getElementById('questionNumber').textContent = `ì§ˆë¬¸ ${currentQuestion + 1} / ${questions.length}`;
        document.getElementById('questionText').textContent = question.question;
        
        const optionsContainer = document.getElementById('options');
        optionsContainer.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'option';
            optionElement.textContent = option.text;
            optionElement.onclick = () => selectOption(index, optionElement);
            optionsContainer.appendChild(optionElement);
        });
        
        document.getElementById('nextButton').classList.remove('active');
        selectedOption = null;
    }

    function selectOption(index, element) {
        const question = questions[currentQuestion];
        if (question.allowMultiple) {
            // ë‹¤ì¤‘ ì„ íƒ í—ˆìš© ì§ˆë¬¸
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                if (selectedOption) {
                    selectedOption = selectedOption.filter(item => item !== index);
                }
            } else {
                element.classList.add('selected');
                if (!selectedOption) {
                    selectedOption = [];
                }
                selectedOption.push(index);
            }
            // ë‹¤ì¤‘ ì„ íƒ ì‹œì—ëŠ” ìµœì†Œ í•œ ê°œ ì„ íƒë˜ì–´ ìˆìœ¼ë©´ ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
            document.getElementById('nextButton').classList.toggle('active', selectedOption && selectedOption.length > 0);
        } else {
            // ë‹¨ì¼ ì„ íƒ ì§ˆë¬¸ (ê¸°ì¡´ ë¡œì§)
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedOption = index;
            document.getElementById('nextButton').classList.add('active');
        }
    }

    function nextQuestion() {
        const question = questions[currentQuestion];
        if (question.allowMultiple) {
            if (!selectedOption || selectedOption.length === 0) return;
            
            selectedOption.forEach(idx => {
                const selectedAnswer = question.options[idx];
                userAnswers.push({
                    questionIndex: currentQuestion,
                    question: question.question,
                    selectedOption: selectedAnswer.text,
                    selectedType: selectedAnswer.type
                });
                answers[selectedAnswer.type]++;
            });
        } else {
            if (selectedOption === null) return;
            
            const selectedAnswer = question.options[selectedOption];
            
            // ì‚¬ìš©ì ë‹µë³€ ì €ì¥
            userAnswers.push({
                questionIndex: currentQuestion,
                question: question.question,
                selectedOption: selectedAnswer.text,
                selectedType: selectedAnswer.type
            });
            
            answers[selectedAnswer.type]++;
        }
        
        currentQuestion++;
        
        if (currentQuestion < questions.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        const completionTime = Math.round((Date.now() - testStartTime) / 1000 / 60); // ë¶„ ë‹¨ìœ„
        
        const mbtiType = 
            (answers.E > answers.I ? 'E' : 'I') +
            (answers.S > answers.N ? 'S' : 'N') +
            (answers.T > answers.F ? 'T' : 'F') +
            (answers.J > answers.P ? 'J' : 'P');
        
        // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì €ì¥
        saveTestData(mbtiType, completionTime);
        
        const result = mbtiResults[mbtiType];
        
        document.getElementById('testPage').style.display = 'none';
        document.getElementById('resultPage').style.display = 'block';
        
        document.getElementById('resultType').textContent = mbtiType;
        document.getElementById('resultTitle').textContent = result.title;
        document.getElementById('resultDescription').textContent = result.description;
        
        const traitsContainer = document.getElementById('traits');
        traitsContainer.innerHTML = '';
        
        result.traits.forEach(trait => {
            const traitElement = document.createElement('div');
            traitElement.className = 'trait';
            traitElement.innerHTML = `
                <div class="trait-title">${trait.title}</div>
                <div class="trait-desc">${trait.desc}</div>
            `;
            traitsContainer.appendChild(traitElement);
        });
    }

    // ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½í•˜ì„¸ìš”)
    const ANALYTICS_PASSWORD = "admin123";

    function showAnalytics() {
        const password = prompt("ë°ì´í„° ë¶„ì„ì„ ë³´ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        if (password !== ANALYTICS_PASSWORD) {
            alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
            return;
        }

        const analytics = getAnalyticsData();
        
        document.getElementById('resultPage').style.display = 'none';
        document.getElementById('analyticsPage').style.display = 'block';
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        document.getElementById('totalTests').textContent = analytics.totalTests;
        document.getElementById('uniqueUsers').textContent = analytics.uniqueUsers;
        document.getElementById('mostCommonType').textContent = analytics.mostCommonType;
        document.getElementById('avgCompletionTime').textContent = analytics.avgCompletionTime;
        
        // MBTI ë¶„í¬ ì°¨íŠ¸
        const mbtiContainer = document.getElementById('mbtiDistribution');
        mbtiContainer.innerHTML = '';
        
        const sortedMbti = Object.entries(analytics.mbtiDistribution)
            .sort(([,a], [,b]) => b - a);
        
        sortedMbti.forEach(([type, count]) => {
            const percentage = Math.round((count / analytics.totalTests) * 100);
            const barElement = document.createElement('div');
            barElement.className = 'mbti-bar';
            barElement.innerHTML = `
                <div class="mbti-label">${type}</div>
                <div class="mbti-progress">
                    <div class="mbti-fill" style="width: ${percentage}%"></div>
                </div>
                <div class="mbti-count">${count}</div>
            `;
            mbtiContainer.appendChild(barElement);
        });
        
        // ì°¨ì›ë³„ ë¶„í¬ ì°¨íŠ¸
        const dimensionContainer = document.getElementById('dimensionDistribution');
        dimensionContainer.innerHTML = '';
        
        const dimensions = [
            { name: 'E/I', e: analytics.dimensionDistribution.E, i: analytics.dimensionDistribution.I },
            { name: 'S/N', s: analytics.dimensionDistribution.S, n: analytics.dimensionDistribution.N },
            { name: 'T/F', t: analytics.dimensionDistribution.T, f: analytics.dimensionDistribution.F },
            { name: 'J/P', j: analytics.dimensionDistribution.J, p: analytics.dimensionDistribution.P }
        ];
        
        dimensions.forEach(dim => {
            const keys = Object.keys(dim).filter(k => k !== 'name');
            const total = keys.reduce((sum, k) => sum + dim[k], 0);
            
            keys.forEach(key => {
                const count = dim[key];
                const percentage = total > 0 ? Math.round((count / total) * 100) : 0;
                const barElement = document.createElement('div');
                barElement.className = 'mbti-bar';
                barElement.innerHTML = `
                    <div class="mbti-label">${dim.name} - ${key.toUpperCase()}</div>
                    <div class="mbti-progress">
                        <div class="mbti-fill" style="width: ${percentage}%"></div>
                    </div>
                    <div class="mbti-count">${count}</div>
                `;
                dimensionContainer.appendChild(barElement);
            });
        });

        // SNS ë¶„í¬ ì°¨íŠ¸
        const snsContainer = document.getElementById('snsDistribution');
        snsContainer.innerHTML = '';

        const sortedSns = Object.entries(analytics.snsDistribution)
            .sort(([,a], [,b]) => b - a);

        sortedSns.forEach(([type, count]) => {
            const percentage = Math.round((count / analytics.totalTests) * 100);
            const barElement = document.createElement('div');
            barElement.className = 'mbti-bar';
            barElement.innerHTML = `
                <div class="mbti-label">${type}</div>
                <div class="mbti-progress">
                    <div class="mbti-fill" style="width: ${percentage}%"></div>
                </div>
                <div class="mbti-count">${count}</div>
            `;
            snsContainer.appendChild(barElement);
        });
    }

    function exportData() {
        const allTests = JSON.parse(localStorage.getItem('mbtiTests') || '[]');
        const csvContent = "data:text/csv;charset=utf-8," + 
            "ID,Timestamp,MBTI Type,Completion Time (min),User Agent,Screen Resolution\n" +
            allTests.map(test => 
                `${test.id},${test.timestamp},${test.mbtiType},${test.completionTime},"${test.userAgent}",${test.screenResolution}`
            ).join("\n");
        
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", `mbti_test_data_${new Date().toISOString().split('T')[0]}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    function backToResult() {
        document.getElementById('analyticsPage').style.display = 'none';
        document.getElementById('resultPage').style.display = 'block';
    }

    function restartTest() {
        currentQuestion = 0;
        answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0, SNS_INSTA: 0, SNS_YT: 0, SNS_FB: 0, SNS_TIKTOK: 0, SNS_X: 0, SNS_NAVER_BLOG: 0, SNS_CAFE: 0, SNS_THREAD: 0, SNS_LINKEDIN: 0, SNS_ETC: 0 };
        selectedOption = null;
        userAnswers = [];
        
        document.getElementById('resultPage').style.display = 'none';
        document.getElementById('startPage').style.display = 'block';
    }
</script>

</body>
</html>
