<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜•ì€?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            font-size: 2.5em;
            color: #4a90e2;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 20px;
        }

        p {
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
            color: #555;
        }

        .start-button, .view-analytics-button {
            padding: 18px 40px;
            font-size: 1.2em;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
            margin-bottom: 15px; /* Added margin for spacing */
        }

        .start-button:hover, .view-analytics-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(74, 144, 226, 0.4);
        }

        .start-button:active, .view-analytics-button:active {
            transform: translateY(-1px);
        }

        .info {
            margin-top: 20px;
            font-size: 0.9em;
            color: #888;
        }

        /* í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .test-container {
            max-width: 600px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .question-number {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.4;
            color: #333;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #fafafa;
            text-align: left;
        }

        .option:hover {
            border-color: #4a90e2;
            background-color: #f0f7ff;
            transform: translateY(-2px);
        }

        .option.selected {
            border-color: #4a90e2;
            background-color: #e3f2fd;
        }

        .next-button {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #4a90e2, #357bd8);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        .next-button.active {
            opacity: 1;
            pointer-events: auto;
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
        }

        /* ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .result-container {
            max-width: 700px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .result-type {
            font-size: 3em;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .result-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #555;
        }

        .traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .trait {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #4a90e2;
        }

        .trait-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 5px;
        }

        .trait-desc {
            font-size: 0.9em;
            color: #666;
        }

        .restart-button, .view-analytics-button-result {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #4a90e2;
            background-color: transparent;
            border: 2px solid #4a90e2;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .restart-button:hover, .view-analytics-button-result:hover {
            background-color: #4a90e2;
            color: #fff;
            transform: translateY(-2px);
        }

        /* ë°ì´í„° ë¶„ì„ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .analytics-container {
            max-width: 800px;
            width: 90%;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            display: none;
        }

        .analytics-container h2 {
            font-size: 2em;
            color: #4a90e2;
            margin-bottom: 25px;
            font-weight: 700;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border-left: 5px solid #764ba2;
        }

        .analytics-card-title {
            font-size: 1.1em;
            color: #555;
            margin-bottom: 10px;
        }

        .analytics-card-value {
            font-size: 2.2em;
            font-weight: bold;
            color: #764ba2;
        }

        .chart-container {
            margin-bottom: 30px;
        }

        .chart-container canvas {
            max-width: 100%;
            height: auto;
        }
        .back-to-home-button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            color: #667eea;
            background-color: transparent;
            border: 2px solid #667eea;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .back-to-home-button:hover {
            background-color: #667eea;
            color: #fff;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

<div class="container" id="startPage">
    <h1>ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜•ì€?</h1>
    <div class="subtitle">Myers-Briggs Type Indicator</div>
    <p>ì„¤ë¬¸ì„ í†µí•´ ë‚˜ì˜ ì¼ê²½í—˜ ìœ í˜•ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
    <button class="start-button" onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
    <button class="view-analytics-button" onclick="showAnalyticsPage()">ë°ì´í„° ë¶„ì„ ë³´ê¸°</button>
    <div class="info">â±ï¸ ì†Œìš”ì‹œê°„: ì•½ 5ë¶„</div>
</div>

<div class="test-container" id="testPage">
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="question-number" id="questionNumber">ì§ˆë¬¸ 1 / 20</div>
    <div class="question" id="questionText"></div>
    <div class="options" id="options"></div>
    <button class="next-button" id="nextButton" onclick="nextQuestion()">ë‹¤ìŒ ì§ˆë¬¸</button>
</div>

<div class="result-container" id="resultPage">
    <div class="result-type" id="resultType"></div>
    <div class="result-title" id="resultTitle"></div>
    <div class="result-description" id="resultDescription"></div>
    <div class="traits" id="traits"></div>
    <button class="restart-button" onclick="restartTest()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
    <button class="view-analytics-button-result" onclick="showAnalyticsPage()">ë°ì´í„° ë¶„ì„ ë³´ê¸°</button>
</div>

<div class="analytics-container" id="analyticsPage">
    <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¶„ì„</h2>
    <div class="analytics-grid">
        <div class="analytics-card">
            <div class="analytics-card-title">ì´ í…ŒìŠ¤íŠ¸ ìˆ˜</div>
            <div class="analytics-card-value" id="totalTests">0</div>
        </div>
        <div class="analytics-card">
            <div class="analytics-card-title">ê³ ìœ  ì‚¬ìš©ì ìˆ˜</div>
            <div class="analytics-card-value" id="uniqueUsers">0</div>
        </div>
        <div class="analytics-card">
            <div class="analytics-card-title">ê°€ì¥ ë§ì€ ìœ í˜•</div>
            <div class="analytics-card-value" id="mostFrequentType">-</div>
        </div>
        <div class="analytics-card">
            <div class="analytics-card-title">í‰ê·  ì™„ë£Œ ì‹œê°„(ë¶„)</div>
            <div class="analytics-card-value" id="avgCompletionTime">0</div>
        </div>
    </div>

    <div class="chart-container">
        <h3>MBTI ìœ í˜•ë³„ ë¶„í¬</h3>
        <canvas id="mbtiTypeChart"></canvas>
    </div>

    <div class="chart-container">
        <h3>4ì°¨ì›ë³„ ë¶„í¬</h3>
        <canvas id="dimensionChart"></canvas>
    </div>
    
    <button class="back-to-home-button" onclick="goToHomePage()">ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // MBTI ì§ˆë¬¸ ë°ì´í„° (ê¸°ì¡´ mbti-test.html ë‚´ìš©ê³¼ ë™ì¼)
    const questions = [
        {
            question: "ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ ë§Œë‚˜ëŠ” íŒŒí‹°ì—ì„œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ë§ì€ ì‚¬ëŒë“¤ê³¼ ëŒ€í™”í•˜ë©° ì—ë„ˆì§€ë¥¼ ì–»ëŠ”ë‹¤", type: "E" },
                { text: "ì†Œìˆ˜ì˜ ì¹œí•œ ì‚¬ëŒë“¤ê³¼ ê¹Šì€ ëŒ€í™”ë¥¼ ë‚˜ëˆˆë‹¤", type: "I" }
            ]
        },
        {
            question: "ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ ë‹¹ì‹ ì€?",
            options: [
                { text: "êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ë°©ë²•ì„ ì„ í˜¸í•œë‹¤", type: "S" },
                { text: "ì°½ì˜ì ì´ê³  ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì°¾ëŠ”ë‹¤", type: "N" }
            ]
        },
        {
            question: "ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦´ ë•Œ ë‹¹ì‹ ì€? ì»´í“¨í„°ëŠ”? ë‹¹ì‹ ì€?",
            options: [
                { text: "ë…¼ë¦¬ì  ë¶„ì„ê³¼ ê°ê´€ì  ì‚¬ì‹¤ì„ ì¤‘ì‹œí•œë‹¤", type: "T" },
                { text: "ì‚¬ëŒë“¤ì˜ ê°ì •ê³¼ ê°€ì¹˜ë¥¼ ê³ ë ¤í•œë‹¤", type: "F" }
            ]
        },
        {
            question: "ì¼ìƒìƒí™œì—ì„œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ê³„íšì„ ì„¸ìš°ê³  ì²´ê³„ì ìœ¼ë¡œ ì§„í–‰í•œë‹¤", type: "J" },
                { text: "ìœ ì—°í•˜ê²Œ ìƒí™©ì— ë§ì¶° ëŒ€ì‘í•œë‹¤", type: "P" }
            ]
        },
        {
            question: "ì—ë„ˆì§€ë¥¼ ì–»ëŠ” ë°©ë²•ì€?",
            options: [
                { text: "ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ í™œë™í•  ë•Œ", type: "E" },
                { text: "í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§ˆ ë•Œ", type: "I" }
            ]
        },
        {
            question: "ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì€?",
            options: [
                { text: "ë‹¨ê³„ë³„ë¡œ ì°¨ê·¼ì°¨ê·¼ ì ‘ê·¼í•œë‹¤", type: "S" },
                { text: "ì „ì²´ì ì¸ ê·¸ë¦¼ì„ ë¨¼ì € íŒŒì•…í•œë‹¤", type: "N" }
            ]
        },
        {
            question: "ê°ˆë“± ìƒí™©ì—ì„œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ê°ê´€ì  ì‚¬ì‹¤ì„ ë°”íƒ•ìœ¼ë¡œ íŒë‹¨í•œë‹¤", type: "T" },
                { text: "ëª¨ë“  ì‚¬ëŒì˜ ì…ì¥ì„ ì´í•´í•˜ë ¤ í•œë‹¤", type: "F" }
            ]
        },
        {
            question: "í”„ë¡œì íŠ¸ ì§„í–‰ ë°©ì‹ì€?",
            options: [
                { text: "ë¯¸ë¦¬ ê³„íšì„ ì„¸ìš°ê³  ì¼ì •ì„ ì§€í‚¨ë‹¤", type: "J" },
                { text: "ë§ˆê°ì¼ì„ í™œìš©í•´ ìœ ì—°í•˜ê²Œ ì§„í–‰í•œë‹¤", type: "P" }
            ]
        },
        {
            question: "ìƒˆë¡œìš´ í™˜ê²½ì—ì„œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ì ê·¹ì ìœ¼ë¡œ ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦°ë‹¤", type: "E" },
                { text: "ê´€ì°°í•˜ë©° ì²œì²œíˆ ì ì‘í•œë‹¤", type: "I" }
            ]
        },
        {
            question: "í•™ìŠµí•  ë•Œ ì„ í˜¸í•˜ëŠ” ë°©ì‹ì€?",
            options: [
                { text: "êµ¬ì²´ì ì¸ ì˜ˆì‹œì™€ ì‹¤ìŠµì„ í†µí•´", type: "S" },
                { text: "ì´ë¡ ê³¼ ê°œë…ì„ ë¨¼ì € ì´í•´í•œ í›„", type: "N" }
            ]
        },
        {
            question: "í”¼ë“œë°±ì„ ì¤„ ë•Œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ì§ì ‘ì ì´ê³  ëª…í™•í•˜ê²Œ ì „ë‹¬í•œë‹¤", type: "T" },
                { text: "ìƒëŒ€ë°©ì˜ ê¸°ë¶„ì„ ê³ ë ¤í•´ ì „ë‹¬í•œë‹¤", type: "F" }
            ]
        },
        {
            question: "ì—¬í–‰ ê³„íšì„ ì„¸ìš¸ ë•Œ?",
            options: [
                { text: "ìƒì„¸í•œ ì¼ì •ê³¼ ì˜ˆì•½ì„ ë¯¸ë¦¬ í•œë‹¤", type: "J" },
                { text: "ëŒ€ëµì ì¸ ê³„íšë§Œ ì„¸ìš°ê³  ì¦‰í¥ì ìœ¼ë¡œ", type: "P" }
            ]
        },
        {
            question: "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì„ ë•Œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ì¹œêµ¬ë“¤ê³¼ ì´ì•¼ê¸°í•˜ë©° í•´ì†Œí•œë‹¤", type: "E" },
                { text: "í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§€ë©° íšŒë³µí•œë‹¤", type: "I" }
            ]
        },
        {
            question: "ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš¸ ë•Œ?",
            options: [
                { text: "ë‹¨ê³„ë³„ ë§¤ë‰´ì–¼ì„ ë”°ë¼í•œë‹¤", type: "S" },
                { text: "ì§ì ‘ ì‹œë„í•´ë³´ë©° ìµíŒë‹¤", type: "N" }
            ]
        },
        {
            question: "íŒ€ì—ì„œ ì˜ê²¬ì´ ë‹¤ë¥¼ ë•Œ?",
            options: [
                { text: "ë…¼ë¦¬ì  ê·¼ê±°ë¡œ ì„¤ë“í•œë‹¤", type: "T" },
                { text: "ëª¨ë“  ì˜ê²¬ì˜ ì¥ì ì„ ì°¾ì•„ë³¸ë‹¤", type: "F" }
            ]
        },
        {
            question: "ì¼ìƒì ì¸ ì—…ë¬´ì—ì„œ ë‹¹ì‹ ì€?",
            options: [
                { text: "ì •í•´ì§„ ì ˆì°¨ì™€ ê·œì¹™ì„ ë”°ë¥¸ë‹¤", type: "J" },
                { text: "íš¨ìœ¨ì ì¸ ìƒˆë¡œìš´ ë°©ë²•ì„ ì°¾ëŠ”ë‹¤", type: "P" }
            ]
        },
        {
            question: "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•  ë•Œ?",
            options: [
                { text: "íšŒì˜ì—ì„œ ì ê·¹ì ìœ¼ë¡œ ë°œí‘œí•œë‹¤", type: "E" },
                { text: "ê°œì¸ì ìœ¼ë¡œ ì‹ ì¤‘í•˜ê²Œ ê²€í†  í›„ ì œì‹œí•œë‹¤", type: "I" }
            ]
        },
        {
            question: "ë¬¸ì œ í•´ê²° ì ‘ê·¼ë²•ì€?",
            options: [
                { text: "ê²€ì¦ëœ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤", type: "S" },
                { text: "í˜ì‹ ì ì¸ í•´ê²°ì±…ì„ ì‹œë„í•œë‹¤", type: "N" }
            ]
        },
        {
            question: "ì¤‘ìš”í•œ ê²°ì •ì—ì„œ ê³ ë ¤í•˜ëŠ” ê²ƒì€?",
            options: [
                { text: "íš¨ìœ¨ì„±ê³¼ ê²°ê³¼ì˜ ê°ê´€ì  ë¶„ì„", type: "T" },
                { text: "ì‚¬ëŒë“¤ì˜ ë§Œì¡±ë„ì™€ ì¡°í™”", type: "F" }
            ]
        },
        {
            question: "ë§ˆì§€ë§‰ìœ¼ë¡œ, ì´ìƒì ì¸ í•˜ë£¨ëŠ”?",
            options: [
                { text: "ê³„íšëŒ€ë¡œ ì™„ë²½í•˜ê²Œ ì§„í–‰ë˜ëŠ” í•˜ë£¨", type: "J" },
                { text: "ì˜ˆìƒì¹˜ ëª»í•œ ì¦ê±°ìš´ ì¼ì´ ìƒê¸°ëŠ” í•˜ë£¨", type: "P" }
            ]
        }
    ];

    // MBTI ê²°ê³¼ ë°ì´í„° (ê¸°ì¡´ mbti-test.html ë‚´ìš©ê³¼ ë™ì¼)
    const mbtiResults = {
        "INTJ": {
            title: "ê±´ì¶•ê°€",
            description: "ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ì „ëµì  ì‚¬ê³ ë¥¼ í•˜ëŠ” ê±´ì¶•ê°€í˜•ì€ ëª¨ë“  ê²ƒì„ ê°œì„ í•  ë°©ë²•ì„ ì°¾ì•„ë‚´ëŠ” ë¬¸ì œ í•´ê²°ì‚¬ì…ë‹ˆë‹¤. ì²´ê³„ì ì´ê³  ë…¼ë¦¬ì ì¸ ì ‘ê·¼ìœ¼ë¡œ ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤.",
            traits: [
                { title: "ë…ë¦½ì ", desc: "ìì‹ ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ì¼í•˜ëŠ” ê²ƒì„ ì„ í˜¸" },
                { title: "ì „ëµì ", desc: "ì¥ê¸°ì  ê´€ì ì—ì„œ ê³„íšì„ ì„¸ì›€" },
                { title: "ì™„ë²½ì£¼ì˜", desc: "ë†’ì€ ê¸°ì¤€ìœ¼ë¡œ ì¼ì˜ í’ˆì§ˆì„ ì¶”êµ¬" },
                { title: "ê²°ë‹¨ë ¥", desc: "ëª…í™•í•œ ëª©í‘œë¥¼ í–¥í•´ ì¶”ì§„ë ¥ ìˆê²Œ í–‰ë™" }
            ]
        },
        "INTP": {
            title: "ë…¼ë¦¬í•™ì",
            description: "ì§€ì‹ì— ëŒ€í•œ ëì—†ëŠ” ê°ˆì¦ì„ ê°€ì§„ ë…¼ë¦¬í•™ìí˜•ì€ ì´ë¡ ê³¼ ì¶”ìƒì  ê°œë…ì— ê¹Šì´ ëª°ì…í•©ë‹ˆë‹¤. ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° íƒì›”í•œ ëŠ¥ë ¥ì„ ë³´ì´ë©°, ì§€ì  í˜¸ê¸°ì‹¬ì´ ë§¤ìš° ê°•í•©ë‹ˆë‹¤.",
            traits: [
                { title: "ë¶„ì„ì ", desc: "ë…¼ë¦¬ì  ì‚¬ê³ ë¡œ ë¬¸ì œë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„" },
                { title: "ì°½ì˜ì ", desc: "ë…ì°½ì ì´ê³  í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ ì œì‹œ" },
                { title: "ê°ê´€ì ", desc: "ê°ì •ë³´ë‹¤ ë…¼ë¦¬ì™€ ì‚¬ì‹¤ì„ ì¤‘ì‹œ" },
                { title: "ìœ ì—°í•œ", desc: "ìƒˆë¡œìš´ ê´€ì ê³¼ ê°€ëŠ¥ì„±ì„ ì—´ì–´ë‘ " }
            ]
        },
        "ENTJ": {
            title: "í†µì†”ì",
            description: "ìì—°ìŠ¤ëŸ¬ìš´ ë¦¬ë”ì‹­ì„ ê°€ì§„ í†µì†”ìí˜•ì€ ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ íŒ€ì„ ì´ëŒì–´ê°€ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤. íš¨ìœ¨ì„±ê³¼ ê²°ê³¼ë¥¼ ì¤‘ì‹œí•˜ë©°, í° ê·¸ë¦¼ì„ ë³´ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.",
            traits: [
                { title: "ë¦¬ë”ì‹­", desc: "ìì—°ìŠ¤ëŸ½ê²Œ íŒ€ì„ ì´ëŒê³  ë™ê¸°ë¶€ì—¬" },
                { title: "ê²°ë‹¨ë ¥", desc: "ë¹ ë¥´ê³  í™•ì‹ ì— ì°¬ ê²°ì •ì„ ë‚´ë¦¼" },
                { title: "ëª©í‘œì§€í–¥", desc: "ëª…í™•í•œ ëª©í‘œë¥¼ í–¥í•´ ì¶”ì§„ë ¥ ìˆê²Œ í–‰ë™" },
                { title: "íš¨ìœ¨ì„±", desc: "ìµœì†Œí•œì˜ ë…¸ë ¥ìœ¼ë¡œ ìµœëŒ€ì˜ ê²°ê³¼ ì¶”êµ¬" }
            ]
        },
        "ENTP": {
            title: "í† ë¡ ê°€",
            description: "ë˜‘ë˜‘í•˜ê³  í˜¸ê¸°ì‹¬ì´ ë§ì€ í† ë¡ ê°€í˜•ì€ ì§€ì  ìê·¹ì„ ì£¼ëŠ” ëŒ€í™”ë¥¼ ì¦ê¹ë‹ˆë‹¤. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ê°€ëŠ¥ì„±ì— ì—´ë ¤ìˆìœ¼ë©°, ì°½ì˜ì  ë¬¸ì œ í•´ê²°ì— ë›°ì–´ë‚œ ëŠ¥ë ¥ì„ ë³´ì…ë‹ˆë‹¤.",
            traits: [
                { title: "ì°½ì˜ì ", desc: "ë…ì°½ì ì´ê³  í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ ì œì‹œ" },
                { title: "ì ì‘ë ¥", desc: "ë³€í™”í•˜ëŠ” ìƒí™©ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘" },
                { title: "í˜¸ê¸°ì‹¬", desc: "ìƒˆë¡œìš´ ì§€ì‹ê³¼ ê²½í—˜ì— ëŒ€í•œ ê°•í•œ ìš•êµ¬" },
                { title: "ì—ë„ˆì§€", desc: "ì—´ì •ì ì´ê³  í™œê¸°ì°¬ ì—ë„ˆì§€" }
            ]
        },
        "INFJ": {
            title: "ì˜¹í˜¸ì",
            description: "ì´ìƒì£¼ì˜ì ì´ê³  ì°½ì˜ì ì¸ ì˜¹í˜¸ìí˜•ì€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì„ ë•ê³  ì„¸ìƒì„ ë” ë‚˜ì€ ê³³ìœ¼ë¡œ ë§Œë“¤ê³ ì í•©ë‹ˆë‹¤. ê¹Šì´ ìˆëŠ” í†µì°°ë ¥ê³¼ ê°•í•œ ê°€ì¹˜ê´€ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.",
            traits: [
                { title: "ì´ìƒì£¼ì˜", desc: "ë” ë‚˜ì€ ì„¸ìƒì„ ë§Œë“¤ê³ ì í•˜ëŠ” ë¹„ì „" },
                { title: "í†µì°°ë ¥", desc: "ì‚¬ëŒê³¼ ìƒí™©ì— ëŒ€í•œ ê¹Šì€ ì´í•´" },
                { title: "ì°½ì˜ì„±", desc: "ë…ì°½ì ì´ê³  ì˜ë¯¸ ìˆëŠ” ì•„ì´ë””ì–´" },
                { title: "ê²°ë‹¨ë ¥", desc: "ê°€ì¹˜ê´€ì— ë”°ë¥¸ í™•ê³ í•œ ê²°ì •" }
            ]
        },
        "INFP": {
            title: "ì¤‘ì¬ì",
            description: "ì‹œì ì´ê³  ì¹œì ˆí•œ ì¤‘ì¬ìí˜•ì€ í•­ìƒ ì„ ì„ í–‰í•  ì¤€ë¹„ê°€ ë˜ì–´ ìˆëŠ” ì´ìƒì£¼ì˜ì  ì„±ê²©ì…ë‹ˆë‹¤. ìì‹ ë§Œì˜ ê°€ì¹˜ê´€ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ë©°, ì§„ì •ì„± ìˆëŠ” ì‚¶ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.",
            traits: [
                { title: "ì´ìƒì£¼ì˜", desc: "ê°œì¸ì  ê°€ì¹˜ê´€ì— ë”°ë¥¸ ì‚¶ì˜ ì¶”êµ¬" },
                { title: "ì°½ì˜ì„±", desc: "ì˜ˆìˆ ì ì´ê³  ë…ì°½ì ì¸ í‘œí˜„" },
                { title: "ì—´ì •", desc: "ì¤‘ìš”í•œ ì¼ì— ëŒ€í•œ ê¹Šì€ ëª°ì…" },
                { title: "ìœ ì—°ì„±", desc: "ë‹¤ì–‘í•œ ê´€ì ì— ëŒ€í•œ ê°œë°©ì„±" }
            ]
        },
        "ENFJ": {
            title: "ì£¼ì¸ê³µ",
            description: "ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ì˜ê°ì„ ì£¼ëŠ” ì£¼ì¸ê³µí˜•ì€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì„±ì¥ê³¼ ë°œì „ì„ ë•ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤. ìì—°ìŠ¤ëŸ¬ìš´ ë¦¬ë”ì‹­ê³¼ ê°•í•œ ê³µê° ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.",
            traits: [
                { title: "ì¹´ë¦¬ìŠ¤ë§ˆ", desc: "ìì—°ìŠ¤ëŸ½ê²Œ ì‚¬ëŒë“¤ì„ ì´ë„ëŠ” ë§¤ë ¥" },
                { title: "ê³µê°ëŠ¥ë ¥", desc: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ê¹Šì´ ì´í•´" },
                { title: "ì´ìƒì£¼ì˜", desc: "ë” ë‚˜ì€ ì„¸ìƒì„ ë§Œë“¤ê³ ì í•˜ëŠ” ë¹„ì „" },
                { title: "ì—´ì •", desc: "ì¤‘ìš”í•œ ì¼ì— ëŒ€í•œ ê°•í•œ ëª°ì…" }
            ]
        },
        "ENFP": {
            title: "í™œë™ê°€",
            description: "ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ í™œë™ê°€í˜•ì€ ì‚¶ì„ ì¦ê¸°ê³  ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ íƒí—˜í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹œí•˜ë©°, ì˜ê°ì„ ì£¼ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.",
            traits: [
                { title: "ì—´ì •", desc: "ìƒí™œì— ëŒ€í•œ ê°•í•œ ì—´ì •ê³¼ ì—ë„ˆì§€" },
                { title: "ì°½ì˜ì„±", desc: "ë…ì°½ì ì´ê³  í˜ì‹ ì ì¸ ì•„ì´ë””ì–´" },
                { title: "ì‚¬êµì„±", desc: "ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹œ" },
                { title: "ìœ ì—°ì„±", desc: "ë³€í™”ì™€ ìƒˆë¡œìš´ ê²½í—˜ì— ê°œë°©ì " }
            ]
        },
        "ISTJ": {
            title: "ë…¼ë¦¬ì£¼ì˜ì",
            description: "ì‹¤ìš©ì ì´ê³  ì‚¬ì‹¤ì— ê¸°ë°˜í•œ ë…¼ë¦¬ì£¼ì˜ìí˜•ì€ ì‹ ë¢°í•  ìˆ˜ ìˆê³  ì±…ì„ê°ì´ ê°•í•©ë‹ˆë‹¤. ì „í†µê³¼ ì§ˆì„œë¥¼ ì¤‘ì‹œí•˜ë©°, ì²´ê³„ì ì´ê³  ê¼¼ê¼¼í•œ ë°©ì‹ìœ¼ë¡œ ì¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.",
            traits: [
                { title: "ì‹ ë¢°ì„±", desc: "ì•½ì†ì„ ì§€í‚¤ê³  ì±…ì„ê° ìˆê²Œ í–‰ë™" },
                { title: "ì²´ê³„ì„±", desc: "ì²´ê³„ì ì´ê³  ì¡°ì§ì ì¸ ì ‘ê·¼" },
                { title: "ì‹¤ìš©ì„±", desc: "í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ í•´ê²°ì±…" },
                { title: "ì¸ë‚´ì‹¬", desc: "ê¾¸ì¤€í•˜ê³  ëˆê¸° ìˆëŠ” ë…¸ë ¥" }
            ]
        },
        "ISFJ": {
            title: "ìˆ˜í˜¸ì",
            description: "ë”°ëœ»í•˜ê³  í—Œì‹ ì ì¸ ìˆ˜í˜¸ìí˜•ì€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì„ ëŒë³´ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤. ì±…ì„ê°ì´ ê°•í•˜ê³  ì„¸ì‹¬í•œ ê´€ì°°ë ¥ì„ ê°€ì§€ê³  ìˆì–´ ì£¼ë³€ ì‚¬ëŒë“¤ì˜ í•„ìš”ë¥¼ ì˜ íŒŒì•…í•©ë‹ˆë‹¤.",
            traits: [
                { title: "í—Œì‹ ", desc: "ë‹¤ë¥¸ ì‚¬ëŒì„ ìœ„í•œ í—Œì‹ ì  ë…¸ë ¥" },
                { title: "ì±…ì„ê°", desc: "ë§¡ì€ ì¼ì— ëŒ€í•œ ê°•í•œ ì±…ì„ê°" },
                { title: "ì„¸ì‹¬í•¨", desc: "ë‹¤ë¥¸ ì‚¬ëŒì˜ í•„ìš”ë¥¼ ì„¸ì‹¬í•˜ê²Œ íŒŒì•…" },
                { title: "ì•ˆì •ì„±", desc: "ì•ˆì •ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¡´ì¬" }
            ]
        },
        "ESTJ": {
            title: "ê²½ì˜ì",
            description: "íš¨ìœ¨ì ì´ê³  ì‹¤ìš©ì ì¸ ê²½ì˜ìí˜•ì€ ì§ˆì„œì™€ ì „í†µì„ ì¤‘ì‹œí•©ë‹ˆë‹¤. ê°•í•œ ë¦¬ë”ì‹­ê³¼ ì¡°ì§ ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆì–´ íŒ€ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ë° ë›°ì–´ë‚©ë‹ˆë‹¤.",
            traits: [
                { title: "ë¦¬ë”ì‹­", desc: "ê°•í•œ ë¦¬ë”ì‹­ê³¼ ì¡°ì§ ê´€ë¦¬ ëŠ¥ë ¥" },
                { title: "íš¨ìœ¨ì„±", desc: "ì²´ê³„ì ì´ê³  íš¨ìœ¨ì ì¸ ì—…ë¬´ ì²˜ë¦¬" },
                { title: "ì±…ì„ê°", desc: "ë§¡ì€ ì¼ì— ëŒ€í•œ ê°•í•œ ì±…ì„ê°" },
                { title: "ê²°ë‹¨ë ¥", desc: "ë¹ ë¥´ê³  í™•ì‹ ì— ì°¬ ê²°ì •" }
            ]
        },
        "ESFJ": {
            title: "ì§‘ì •ê´€",
            description: "ë”°ëœ»í•˜ê³  ì‚¬êµì ì¸ ì§‘ì •ê´€í˜•ì€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì„ ë•ê³  ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ê°•í•œ ì±…ì„ê°ê³¼ í˜‘ë ¥ ì •ì‹ ì„ ê°€ì§€ê³  ìˆì–´ íŒ€ì›Œí¬ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤.",
            traits: [
                { title: "ì‚¬êµì„±", desc: "ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹œ" },
                { title: "í˜‘ë ¥", desc: "íŒ€ì›Œí¬ì™€ í˜‘ë ¥ì„ ì¤‘ìš”í•˜ê²Œ ìƒê°" },
                { title: "ì±…ì„ê°", desc: "ë‹¤ë¥¸ ì‚¬ëŒì— ëŒ€í•œ ê°•í•œ ì±…ì„ê°" },
                { title: "ì¡°í™”", desc: "ê°ˆë“±ì„ í•´ê²°í•˜ê³  ì¡°í™”ë¥¼ ì¶”êµ¬" }
            ]
        },
        "ISTP": {
            title: "ë§ŒëŠ¥ì¬ì£¼ê¾¼",
            description: "ëŒ€ë‹´í•˜ê³  ì‹¤ìš©ì ì¸ ë§ŒëŠ¥ì¬ì£¼ê¾¼í˜•ì€ ì†ìœ¼ë¡œ ë§Œì§€ê³  ì¡°ì‘í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ë¬¸ì œ í•´ê²°ì— ë›°ì–´ë‚œ ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ë…ë¦½ì ì´ê³  ìœ ì—°í•œ ì‚¬ê³ ë¥¼ í•©ë‹ˆë‹¤.",
            traits: [
                { title: "ì‹¤ìš©ì„±", desc: "í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ ì ‘ê·¼" },
                { title: "ë…ë¦½ì„±", desc: "ìì‹ ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ë¬¸ì œ í•´ê²°" },
                { title: "ìœ ì—°ì„±", desc: "ë³€í™”í•˜ëŠ” ìƒí™©ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘" },
                { title: "í˜¸ê¸°ì‹¬", desc: "ìƒˆë¡œìš´ ê¸°ìˆ ê³¼ ë°©ë²•ì— ëŒ€í•œ ê´€ì‹¬" }
            ]
        },
        "ISFP": {
            title: "ëª¨í—˜ê°€",
            description: "ìœ ì—°í•˜ê³  ë§¤ë ¥ì ì¸ ëª¨í—˜ê°€í˜•ì€ ìƒˆë¡œìš´ ê²½í—˜ê³¼ ê°ê°ì  ìê·¹ì„ ì¶”êµ¬í•©ë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚˜ë©°, ìì‹ ë§Œì˜ ê°€ì¹˜ê´€ì— ë”°ë¼ ì‚´ì•„ê°€ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤.",
            traits: [
                { title: "ì°½ì˜ì„±", desc: "ì˜ˆìˆ ì ì´ê³  ë…ì°½ì ì¸ ê°ê°" },
                { title: "ìœ ì—°ì„±", desc: "ìƒˆë¡œìš´ ê²½í—˜ì— ëŒ€í•œ ê°œë°©ì„±" },
                { title: "ì§„ì •ì„±", desc: "ìì‹ ë§Œì˜ ê°€ì¹˜ê´€ì— ë”°ë¥¸ ì‚¶" },
                { title: "ê°ìˆ˜ì„±", desc: "ì„¸ë°€í•œ ê°ê°ê³¼ ê´€ì°°ë ¥" }
            ]
        },
        "ESTP": {
            title: "ì‚¬ì—…ê°€",
            description: "ë˜‘ë˜‘í•˜ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ì‚¬ì—…ê°€í˜•ì€ ì¦‰í¥ì ì´ê³  í™œë™ì ì¸ ì‚¶ì„ ì¦ê¹ë‹ˆë‹¤. í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ ì ‘ê·¼ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©°, ì‚¬ëŒë“¤ê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.",
            traits: [
                { title: "í™œë™ì„±", desc: "ì—ë„ˆì§€ ë„˜ì¹˜ê³  í™œë™ì ì¸ ì„±ê²©" },
                { title: "ì‹¤ìš©ì„±", desc: "í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ ë¬¸ì œ í•´ê²°" },
                { title: "ì‚¬êµì„±", desc: "ì‚¬ëŒë“¤ê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ ì¦ê¹€" },
                { title: "ìœ ì—°ì„±", desc: "ë³€í™”í•˜ëŠ” ìƒí™©ì— ë¹ ë¥´ê²Œ ì ì‘" }
            ]
        },
        "ESFP": {
            title: "ì—°ì˜ˆì¸",
            description: "ììœ ë¡œìš´ ì˜í˜¼ì˜ ì—°ì˜ˆì¸í˜•ì€ ì‚¶ì„ ì¦ê¸°ê³  ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ì‹œê°„ì„ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤. ë”°ëœ»í•˜ê³  ì¹œê·¼í•œ ì„±ê²©ìœ¼ë¡œ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.",
            traits: [
                { title: "ì‚¬êµì„±", desc: "ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹œ" },
                { title: "ê¸ì •ì„±", desc: "ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€" },
                { title: "ììœ ë¡œì›€", desc: "ììœ ë¡­ê³  ìœ ì—°í•œ ì„±ê²©" },
                { title: "ì¦ê±°ì›€", desc: "ì‚¶ì˜ ì¦ê±°ì›€ì„ ì¶”êµ¬" }
            ]
        }
    };

    let currentQuestion = 0;
    let answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
    let selectedOption = null;
    let testStartTime;

    // ë°ì´í„° ì €ì¥ ë° ë¡œë“œ
    function getAnalyticsData() {
        return JSON.parse(localStorage.getItem('mbtiAnalytics')) || {
            totalTests: 0,
            uniqueUsers: [],
            mbtiTypeCounts: {},
            dimensionCounts: { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 },
            completionTimes: []
        };
    }

    function saveAnalyticsData(data) {
        localStorage.setItem('mbtiAnalytics', JSON.stringify(data));
    }

    function startTest() {
        document.getElementById('startPage').style.display = 'none';
        document.getElementById('testPage').style.display = 'block';
        currentQuestion = 0;
        answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        selectedOption = null;
        testStartTime = new Date(); // í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹œê°„ ê¸°ë¡
        showQuestion();
    }

    function showQuestion() {
        const question = questions[currentQuestion];
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        
        document.getElementById('progressFill').style.width = progress + '%';
        document.getElementById('questionNumber').textContent = `ì§ˆë¬¸ ${currentQuestion + 1} / ${questions.length}`;
        document.getElementById('questionText').textContent = question.question;
        
        const optionsContainer = document.getElementById('options');
        optionsContainer.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'option';
            optionElement.textContent = option.text;
            optionElement.onclick = () => selectOption(index, optionElement);
            optionsContainer.appendChild(optionElement);
        });
        
        document.getElementById('nextButton').classList.remove('active');
        selectedOption = null;
    }

    function selectOption(index, element) {
        document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
        selectedOption = index;
        document.getElementById('nextButton').classList.add('active');
    }

    function nextQuestion() {
        if (selectedOption === null) return;
        
        const question = questions[currentQuestion];
        const selectedAnswer = question.options[selectedOption];
        answers[selectedAnswer.type]++;
        
        currentQuestion++;
        
        if (currentQuestion < questions.length) {
            showQuestion();
        } else {
            const testEndTime = new Date();
            const completionTime = (testEndTime - testStartTime) / 1000 / 60; // ë¶„ ë‹¨ìœ„

            // ê²°ê³¼ ê³„ì‚° í›„ ë¶„ì„ ë°ì´í„° ì—…ë°ì´íŠ¸
            const mbtiType = calculateMbtiType();
            updateAnalyticsData(mbtiType, completionTime);
            showResult(mbtiType);
        }
    }

    function calculateMbtiType() {
        return (answers.E > answers.I ? 'E' : 'I') +
               (answers.S > answers.N ? 'S' : 'N') +
               (answers.T > answers.F ? 'T' : 'F') +
               (answers.J > answers.P ? 'J' : 'P');
    }

    function updateAnalyticsData(mbtiType, completionTime) {
        let analyticsData = getAnalyticsData();
        analyticsData.totalTests++;
        
        // ê³ ìœ  ì‚¬ìš©ì ìˆ˜ (ê°„ë‹¨í•œ ì‹ë³„ìë¡œ í˜„ì¬ëŠ” IPë‚˜ ê¸°ê¸° ì •ë³´ ì—†ì´ ë‹¨ìˆœ ì¹´ìš´íŠ¸)
        // ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ê³ ìœ  ì‚¬ìš©ì ì‹ë³„ ë¡œì§ í•„ìš”
        if (!analyticsData.uniqueUsers.includes(navigator.userAgent)) { // ë¸Œë¼ìš°ì € ì •ë³´ë¡œ ë‹¨ìˆœ ì‹ë³„
            analyticsData.uniqueUsers.push(navigator.userAgent);
        }

        analyticsData.mbtiTypeCounts[mbtiType] = (analyticsData.mbtiTypeCounts[mbtiType] || 0) + 1;
        
        // 4ì°¨ì›ë³„ ë¶„í¬ ì—…ë°ì´íŠ¸
        for (const typeChar in answers) {
            analyticsData.dimensionCounts[typeChar] += answers[typeChar];
        }

        analyticsData.completionTimes.push(completionTime);
        saveAnalyticsData(analyticsData);
    }

    function showResult(mbtiType) {
        const result = mbtiResults[mbtiType];
        
        document.getElementById('testPage').style.display = 'none';
        document.getElementById('resultPage').style.display = 'block';
        
        document.getElementById('resultType').textContent = mbtiType;
        document.getElementById('resultTitle').textContent = result.title;
        document.getElementById('resultDescription').textContent = result.description;
        
        const traitsContainer = document.getElementById('traits');
        traitsContainer.innerHTML = '';
        
        result.traits.forEach(trait => {
            const traitElement = document.createElement('div');
            traitElement.className = 'trait';
            traitElement.innerHTML = `
                <div class="trait-title">${trait.title}</div>
                <div class="trait-desc">${trait.desc}</div>
            `;
            traitsContainer.appendChild(traitElement);
        });
    }

    function restartTest() {
        currentQuestion = 0;
        answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        selectedOption = null;
        
        document.getElementById('resultPage').style.display = 'none';
        document.getElementById('startPage').style.display = 'block';
    }

    let mbtiTypeChartInstance = null;
    let dimensionChartInstance = null;

    function showAnalyticsPage() {
        document.getElementById('startPage').style.display = 'none';
        document.getElementById('testPage').style.display = 'none';
        document.getElementById('resultPage').style.display = 'none';
        document.getElementById('analyticsPage').style.display = 'block';
        
        loadAnalyticsData();
    }

    function loadAnalyticsData() {
        const analyticsData = getAnalyticsData();

        document.getElementById('totalTests').textContent = analyticsData.totalTests;
        document.getElementById('uniqueUsers').textContent = analyticsData.uniqueUsers.length;

        // ê°€ì¥ ë§ì€ ìœ í˜• ì°¾ê¸°
        let mostFrequentType = '-';
        let maxCount = 0;
        for (const type in analyticsData.mbtiTypeCounts) {
            if (analyticsData.mbtiTypeCounts[type] > maxCount) {
                maxCount = analyticsData.mbtiTypeCounts[type];
                mostFrequentType = type;
            }
        }
        document.getElementById('mostFrequentType').textContent = mostFrequentType;

        // í‰ê·  ì™„ë£Œ ì‹œê°„
        const totalCompletionTime = analyticsData.completionTimes.reduce((sum, time) => sum + time, 0);
        const avgCompletionTime = analyticsData.completionTimes.length > 0 ? (totalCompletionTime / analyticsData.completionTimes.length).toFixed(2) : 0;
        document.getElementById('avgCompletionTime').textContent = avgCompletionTime;

        // MBTI ìœ í˜•ë³„ ë¶„í¬ ì°¨íŠ¸
        const mbtiTypeLabels = Object.keys(analyticsData.mbtiTypeCounts).sort();
        const mbtiTypeData = mbtiTypeLabels.map(label => analyticsData.mbtiTypeCounts[label] || 0);

        if (mbtiTypeChartInstance) {
            mbtiTypeChartInstance.destroy();
        }
        mbtiTypeChartInstance = new Chart(document.getElementById('mbtiTypeChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: mbtiTypeLabels,
                datasets: [{
                    label: 'ìœ í˜•ë³„ í…ŒìŠ¤íŠ¸ ìˆ˜',
                    data: mbtiTypeData,
                    backgroundColor: 'rgba(74, 144, 226, 0.6)',
                    borderColor: 'rgba(74, 144, 226, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                }
            }
        });

        // 4ì°¨ì›ë³„ ë¶„í¬ ì°¨íŠ¸
        const dimensionLabels = ['E', 'I', 'S', 'N', 'T', 'F', 'J', 'P'];
        const dimensionData = dimensionLabels.map(label => analyticsData.dimensionCounts[label] || 0);

        if (dimensionChartInstance) {
            dimensionChartInstance.destroy();
        }
        dimensionChartInstance = new Chart(document.getElementById('dimensionChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: dimensionLabels,
                datasets: [{
                    label: '4ì°¨ì›ë³„ ì„ íƒ ìˆ˜',
                    data: dimensionData,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', // E, I
                        'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)', // S, N
                        'rgba(153, 102, 255, 0.6)', 'rgba(255, 159, 64, 0.6)', // T, F
                        'rgba(199, 199, 199, 0.6)', 'rgba(83, 102, 255, 0.6)'  // J, P
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)',
                        'rgba(199, 199, 199, 1)', 'rgba(83, 102, 255, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                }
            }
        });
    }

    function goToHomePage() {
        document.getElementById('analyticsPage').style.display = 'none';
        document.getElementById('startPage').style.display = 'block';
    }
</script>

</body>
</html>
